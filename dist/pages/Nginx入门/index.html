<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx入门 | HelloCoder</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/global.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script charset="utf-8" async="async" src="https://readmore.openwrite.cn/js/readmore.js"></script>
    <script charset="utf-8" async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?b673363a2df767abd890cd6918642392";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="java面试,java学习,面试指南,Java小白求职之路">
    <meta name="keywords" content="java面试,java面试题目,java核心知识,面试指南,Java小白求职之路">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.c9315ac1.css" as="style"><link rel="preload" href="/assets/js/app.4ca91999.js" as="script"><link rel="preload" href="/assets/js/3.20e33b3c.js" as="script"><link rel="preload" href="/assets/js/4.2d053232.js" as="script"><link rel="preload" href="/assets/js/254.2bfc66b0.js" as="script"><link rel="prefetch" href="/assets/js/10.a7822ef1.js"><link rel="prefetch" href="/assets/js/100.87ca088f.js"><link rel="prefetch" href="/assets/js/101.2ee05870.js"><link rel="prefetch" href="/assets/js/102.951085d7.js"><link rel="prefetch" href="/assets/js/103.92cccbca.js"><link rel="prefetch" href="/assets/js/104.b27bab98.js"><link rel="prefetch" href="/assets/js/105.6879efb7.js"><link rel="prefetch" href="/assets/js/106.d4b345f3.js"><link rel="prefetch" href="/assets/js/107.3236cc08.js"><link rel="prefetch" href="/assets/js/108.853ebb9f.js"><link rel="prefetch" href="/assets/js/109.d5ade95a.js"><link rel="prefetch" href="/assets/js/11.dd8758d2.js"><link rel="prefetch" href="/assets/js/110.91725810.js"><link rel="prefetch" href="/assets/js/111.8add8082.js"><link rel="prefetch" href="/assets/js/112.e0e29be8.js"><link rel="prefetch" href="/assets/js/113.72fd6cd8.js"><link rel="prefetch" href="/assets/js/114.daf74a07.js"><link rel="prefetch" href="/assets/js/115.58a88b76.js"><link rel="prefetch" href="/assets/js/116.6e4915dc.js"><link rel="prefetch" href="/assets/js/117.2809fdf7.js"><link rel="prefetch" href="/assets/js/118.75ae8518.js"><link rel="prefetch" href="/assets/js/119.b1754b18.js"><link rel="prefetch" href="/assets/js/12.8a4a11cb.js"><link rel="prefetch" href="/assets/js/120.8c2990ab.js"><link rel="prefetch" href="/assets/js/121.56ef951c.js"><link rel="prefetch" href="/assets/js/122.e05d3e01.js"><link rel="prefetch" href="/assets/js/123.c23093be.js"><link rel="prefetch" href="/assets/js/124.d6db9dd1.js"><link rel="prefetch" href="/assets/js/125.3e19c070.js"><link rel="prefetch" href="/assets/js/126.5ce67cbc.js"><link rel="prefetch" href="/assets/js/127.05837111.js"><link rel="prefetch" href="/assets/js/128.df199e3d.js"><link rel="prefetch" href="/assets/js/129.e9548620.js"><link rel="prefetch" href="/assets/js/13.4fbdc584.js"><link rel="prefetch" href="/assets/js/130.4972f435.js"><link rel="prefetch" href="/assets/js/131.86273f16.js"><link rel="prefetch" href="/assets/js/132.6b263101.js"><link rel="prefetch" href="/assets/js/133.96203cfb.js"><link rel="prefetch" href="/assets/js/134.3cb56615.js"><link rel="prefetch" href="/assets/js/135.50e8cee1.js"><link rel="prefetch" href="/assets/js/136.215731b5.js"><link rel="prefetch" href="/assets/js/137.f82b68f6.js"><link rel="prefetch" href="/assets/js/138.6623d2c8.js"><link rel="prefetch" href="/assets/js/139.e79ea501.js"><link rel="prefetch" href="/assets/js/14.2b7aa6d2.js"><link rel="prefetch" href="/assets/js/140.edff1467.js"><link rel="prefetch" href="/assets/js/141.ec996868.js"><link rel="prefetch" href="/assets/js/142.b6fac622.js"><link rel="prefetch" href="/assets/js/143.0f815c2c.js"><link rel="prefetch" href="/assets/js/144.21f3d6b9.js"><link rel="prefetch" href="/assets/js/145.ed918c94.js"><link rel="prefetch" href="/assets/js/146.c7d01aa7.js"><link rel="prefetch" href="/assets/js/147.6d7ea3ab.js"><link rel="prefetch" href="/assets/js/148.6eb71f13.js"><link rel="prefetch" href="/assets/js/149.c7f66f9c.js"><link rel="prefetch" href="/assets/js/15.a882ccf5.js"><link rel="prefetch" href="/assets/js/150.7b5dfbe6.js"><link rel="prefetch" href="/assets/js/151.0aab1423.js"><link rel="prefetch" href="/assets/js/152.bfbcca4a.js"><link rel="prefetch" href="/assets/js/153.d4651137.js"><link rel="prefetch" href="/assets/js/154.4f33d027.js"><link rel="prefetch" href="/assets/js/155.c8554625.js"><link rel="prefetch" href="/assets/js/156.b4217637.js"><link rel="prefetch" href="/assets/js/157.772fdf2a.js"><link rel="prefetch" href="/assets/js/158.065fd4b3.js"><link rel="prefetch" href="/assets/js/159.8de4d52b.js"><link rel="prefetch" href="/assets/js/16.40d95b1f.js"><link rel="prefetch" href="/assets/js/160.8422c3f6.js"><link rel="prefetch" href="/assets/js/161.eb511c7b.js"><link rel="prefetch" href="/assets/js/162.b37e278c.js"><link rel="prefetch" href="/assets/js/163.5d400182.js"><link rel="prefetch" href="/assets/js/164.3e573722.js"><link rel="prefetch" href="/assets/js/165.955cdf6d.js"><link rel="prefetch" href="/assets/js/166.78afd6b4.js"><link rel="prefetch" href="/assets/js/167.83d1fd51.js"><link rel="prefetch" href="/assets/js/168.b4b35d68.js"><link rel="prefetch" href="/assets/js/169.8e7ffdbc.js"><link rel="prefetch" href="/assets/js/17.b401c370.js"><link rel="prefetch" href="/assets/js/170.f8db4f64.js"><link rel="prefetch" href="/assets/js/171.8eb18b71.js"><link rel="prefetch" href="/assets/js/172.0fffc87d.js"><link rel="prefetch" href="/assets/js/173.74c13419.js"><link rel="prefetch" href="/assets/js/174.e4ba2dbb.js"><link rel="prefetch" href="/assets/js/175.1fb1439f.js"><link rel="prefetch" href="/assets/js/176.f35b3fd0.js"><link rel="prefetch" href="/assets/js/177.86fca9f2.js"><link rel="prefetch" href="/assets/js/178.426e7a8c.js"><link rel="prefetch" href="/assets/js/179.7bd86dc8.js"><link rel="prefetch" href="/assets/js/18.7ef38216.js"><link rel="prefetch" href="/assets/js/180.722b743a.js"><link rel="prefetch" href="/assets/js/181.5b780b4a.js"><link rel="prefetch" href="/assets/js/182.a4cc1800.js"><link rel="prefetch" href="/assets/js/183.4cf0e02a.js"><link rel="prefetch" href="/assets/js/184.54ed80c7.js"><link rel="prefetch" href="/assets/js/185.c73afa15.js"><link rel="prefetch" href="/assets/js/186.9ed33ce6.js"><link rel="prefetch" href="/assets/js/187.6fabb6f3.js"><link rel="prefetch" href="/assets/js/188.18a82c93.js"><link rel="prefetch" href="/assets/js/189.ace00f79.js"><link rel="prefetch" href="/assets/js/19.222d89e7.js"><link rel="prefetch" href="/assets/js/190.41b30442.js"><link rel="prefetch" href="/assets/js/191.c5bbb09d.js"><link rel="prefetch" href="/assets/js/192.2a10011e.js"><link rel="prefetch" href="/assets/js/193.6242c7da.js"><link rel="prefetch" href="/assets/js/194.c086b47f.js"><link rel="prefetch" href="/assets/js/195.c1a8c626.js"><link rel="prefetch" href="/assets/js/196.f3729463.js"><link rel="prefetch" href="/assets/js/197.3fa35a99.js"><link rel="prefetch" href="/assets/js/198.6de81126.js"><link rel="prefetch" href="/assets/js/199.8f76354e.js"><link rel="prefetch" href="/assets/js/20.1ff17d05.js"><link rel="prefetch" href="/assets/js/200.91f2865e.js"><link rel="prefetch" href="/assets/js/201.952d3edc.js"><link rel="prefetch" href="/assets/js/202.e9ba475d.js"><link rel="prefetch" href="/assets/js/203.e90f0dc0.js"><link rel="prefetch" href="/assets/js/204.987e205a.js"><link rel="prefetch" href="/assets/js/205.baf63b9a.js"><link rel="prefetch" href="/assets/js/206.607a7bfd.js"><link rel="prefetch" href="/assets/js/207.a9dee37f.js"><link rel="prefetch" href="/assets/js/208.967e73b4.js"><link rel="prefetch" href="/assets/js/209.13ed6ab5.js"><link rel="prefetch" href="/assets/js/21.0725abd3.js"><link rel="prefetch" href="/assets/js/210.37666e19.js"><link rel="prefetch" href="/assets/js/211.1d6ada74.js"><link rel="prefetch" href="/assets/js/212.4a39704b.js"><link rel="prefetch" href="/assets/js/213.76dad19f.js"><link rel="prefetch" href="/assets/js/214.88d2da19.js"><link rel="prefetch" href="/assets/js/215.ee32bf4f.js"><link rel="prefetch" href="/assets/js/216.73e900d6.js"><link rel="prefetch" href="/assets/js/217.b6b2474a.js"><link rel="prefetch" href="/assets/js/218.7be2aa94.js"><link rel="prefetch" href="/assets/js/219.2dcf3e94.js"><link rel="prefetch" href="/assets/js/22.9e345007.js"><link rel="prefetch" href="/assets/js/220.7b4cacf0.js"><link rel="prefetch" href="/assets/js/221.636aaf9f.js"><link rel="prefetch" href="/assets/js/222.167dcd82.js"><link rel="prefetch" href="/assets/js/223.04f3fca9.js"><link rel="prefetch" href="/assets/js/224.2dcad583.js"><link rel="prefetch" href="/assets/js/225.cd9afc5d.js"><link rel="prefetch" href="/assets/js/226.0d39e753.js"><link rel="prefetch" href="/assets/js/227.21cae7ee.js"><link rel="prefetch" href="/assets/js/228.5e4a7efd.js"><link rel="prefetch" href="/assets/js/229.6b1e885d.js"><link rel="prefetch" href="/assets/js/23.312324bb.js"><link rel="prefetch" href="/assets/js/230.5a11bbfc.js"><link rel="prefetch" href="/assets/js/231.099942dc.js"><link rel="prefetch" href="/assets/js/232.4da86318.js"><link rel="prefetch" href="/assets/js/233.2c915c4b.js"><link rel="prefetch" href="/assets/js/234.c0d0fb6e.js"><link rel="prefetch" href="/assets/js/235.0688b053.js"><link rel="prefetch" href="/assets/js/236.cb18b831.js"><link rel="prefetch" href="/assets/js/237.e000d86f.js"><link rel="prefetch" href="/assets/js/238.22f1e0b6.js"><link rel="prefetch" href="/assets/js/239.583d8d82.js"><link rel="prefetch" href="/assets/js/24.34833301.js"><link rel="prefetch" href="/assets/js/240.65f9a431.js"><link rel="prefetch" href="/assets/js/241.907aca57.js"><link rel="prefetch" href="/assets/js/242.838d2a77.js"><link rel="prefetch" href="/assets/js/243.fc606068.js"><link rel="prefetch" href="/assets/js/244.64577946.js"><link rel="prefetch" href="/assets/js/245.3d745f1c.js"><link rel="prefetch" href="/assets/js/246.c6a16a21.js"><link rel="prefetch" href="/assets/js/247.c1f056f0.js"><link rel="prefetch" href="/assets/js/248.32d0ee46.js"><link rel="prefetch" href="/assets/js/249.27f65d2b.js"><link rel="prefetch" href="/assets/js/25.4176f599.js"><link rel="prefetch" href="/assets/js/250.e9549227.js"><link rel="prefetch" href="/assets/js/251.a3fb033d.js"><link rel="prefetch" href="/assets/js/252.985ad650.js"><link rel="prefetch" href="/assets/js/253.9845d82a.js"><link rel="prefetch" href="/assets/js/255.7df90eeb.js"><link rel="prefetch" href="/assets/js/256.e36c5153.js"><link rel="prefetch" href="/assets/js/257.250f77b7.js"><link rel="prefetch" href="/assets/js/258.bc896856.js"><link rel="prefetch" href="/assets/js/259.d652be77.js"><link rel="prefetch" href="/assets/js/26.d991adb4.js"><link rel="prefetch" href="/assets/js/260.5cc1b7d6.js"><link rel="prefetch" href="/assets/js/261.237ad507.js"><link rel="prefetch" href="/assets/js/262.53889765.js"><link rel="prefetch" href="/assets/js/263.fc7ebf7c.js"><link rel="prefetch" href="/assets/js/264.5cdf6388.js"><link rel="prefetch" href="/assets/js/265.032e373d.js"><link rel="prefetch" href="/assets/js/266.2f4bb579.js"><link rel="prefetch" href="/assets/js/267.12e271b7.js"><link rel="prefetch" href="/assets/js/268.a2903cc7.js"><link rel="prefetch" href="/assets/js/269.b69e942e.js"><link rel="prefetch" href="/assets/js/27.af0b7fa5.js"><link rel="prefetch" href="/assets/js/270.ae8be9c4.js"><link rel="prefetch" href="/assets/js/271.c467234a.js"><link rel="prefetch" href="/assets/js/272.d0e447b6.js"><link rel="prefetch" href="/assets/js/273.14683292.js"><link rel="prefetch" href="/assets/js/274.34627ef5.js"><link rel="prefetch" href="/assets/js/275.60bc1b6f.js"><link rel="prefetch" href="/assets/js/276.d18efa19.js"><link rel="prefetch" href="/assets/js/277.11ffd884.js"><link rel="prefetch" href="/assets/js/278.d4465510.js"><link rel="prefetch" href="/assets/js/279.a9f44a7a.js"><link rel="prefetch" href="/assets/js/28.627adfff.js"><link rel="prefetch" href="/assets/js/280.a0693b44.js"><link rel="prefetch" href="/assets/js/281.877bec26.js"><link rel="prefetch" href="/assets/js/282.6d9774f7.js"><link rel="prefetch" href="/assets/js/283.3de8b398.js"><link rel="prefetch" href="/assets/js/284.e21771df.js"><link rel="prefetch" href="/assets/js/285.492053cc.js"><link rel="prefetch" href="/assets/js/286.59091fa3.js"><link rel="prefetch" href="/assets/js/287.871fb80f.js"><link rel="prefetch" href="/assets/js/288.1d0f14da.js"><link rel="prefetch" href="/assets/js/289.f63ad22f.js"><link rel="prefetch" href="/assets/js/29.b1834777.js"><link rel="prefetch" href="/assets/js/290.bdea1fee.js"><link rel="prefetch" href="/assets/js/291.a363ec72.js"><link rel="prefetch" href="/assets/js/292.9e979ed2.js"><link rel="prefetch" href="/assets/js/293.c890e808.js"><link rel="prefetch" href="/assets/js/294.57266dd9.js"><link rel="prefetch" href="/assets/js/295.5139cd31.js"><link rel="prefetch" href="/assets/js/296.87782d56.js"><link rel="prefetch" href="/assets/js/297.41dfb645.js"><link rel="prefetch" href="/assets/js/298.ab3b170c.js"><link rel="prefetch" href="/assets/js/299.3abe8324.js"><link rel="prefetch" href="/assets/js/30.1f46cd44.js"><link rel="prefetch" href="/assets/js/300.3993c923.js"><link rel="prefetch" href="/assets/js/301.3d29343f.js"><link rel="prefetch" href="/assets/js/302.feca7cf6.js"><link rel="prefetch" href="/assets/js/303.a05a4377.js"><link rel="prefetch" href="/assets/js/304.fb93f409.js"><link rel="prefetch" href="/assets/js/305.b957b590.js"><link rel="prefetch" href="/assets/js/306.544aea9d.js"><link rel="prefetch" href="/assets/js/307.ab225346.js"><link rel="prefetch" href="/assets/js/308.bbef8e1c.js"><link rel="prefetch" href="/assets/js/309.62d07e41.js"><link rel="prefetch" href="/assets/js/31.cd09c841.js"><link rel="prefetch" href="/assets/js/310.cff100ad.js"><link rel="prefetch" href="/assets/js/311.c48c1a98.js"><link rel="prefetch" href="/assets/js/312.cef88a3c.js"><link rel="prefetch" href="/assets/js/313.75b66cad.js"><link rel="prefetch" href="/assets/js/314.a5790fa1.js"><link rel="prefetch" href="/assets/js/315.23d091d3.js"><link rel="prefetch" href="/assets/js/316.b4b0ef74.js"><link rel="prefetch" href="/assets/js/317.c914b793.js"><link rel="prefetch" href="/assets/js/318.a3606cd1.js"><link rel="prefetch" href="/assets/js/319.952e3dd6.js"><link rel="prefetch" href="/assets/js/32.e13d36af.js"><link rel="prefetch" href="/assets/js/320.5b7558f5.js"><link rel="prefetch" href="/assets/js/321.0cf4e80e.js"><link rel="prefetch" href="/assets/js/322.c2abc38e.js"><link rel="prefetch" href="/assets/js/323.d8431e0e.js"><link rel="prefetch" href="/assets/js/324.cfff22a1.js"><link rel="prefetch" href="/assets/js/325.c820d9dc.js"><link rel="prefetch" href="/assets/js/326.4264e678.js"><link rel="prefetch" href="/assets/js/327.36c1abea.js"><link rel="prefetch" href="/assets/js/328.e17cdfbc.js"><link rel="prefetch" href="/assets/js/329.79e7303a.js"><link rel="prefetch" href="/assets/js/33.45000a22.js"><link rel="prefetch" href="/assets/js/330.c359249d.js"><link rel="prefetch" href="/assets/js/331.000f18a6.js"><link rel="prefetch" href="/assets/js/332.7ec94e4f.js"><link rel="prefetch" href="/assets/js/333.6f50d9a3.js"><link rel="prefetch" href="/assets/js/334.6a47a001.js"><link rel="prefetch" href="/assets/js/335.05942c07.js"><link rel="prefetch" href="/assets/js/336.852c4f38.js"><link rel="prefetch" href="/assets/js/337.71ca0a75.js"><link rel="prefetch" href="/assets/js/338.fe5aa188.js"><link rel="prefetch" href="/assets/js/339.edc02ffc.js"><link rel="prefetch" href="/assets/js/34.de3e84f4.js"><link rel="prefetch" href="/assets/js/340.929382c4.js"><link rel="prefetch" href="/assets/js/341.330fab4d.js"><link rel="prefetch" href="/assets/js/342.0125ff66.js"><link rel="prefetch" href="/assets/js/343.b1983a8e.js"><link rel="prefetch" href="/assets/js/344.d826a47f.js"><link rel="prefetch" href="/assets/js/35.670c33f3.js"><link rel="prefetch" href="/assets/js/36.57d3973b.js"><link rel="prefetch" href="/assets/js/37.d1c6f0f8.js"><link rel="prefetch" href="/assets/js/38.96aa8216.js"><link rel="prefetch" href="/assets/js/39.60320cfa.js"><link rel="prefetch" href="/assets/js/40.3a4901b5.js"><link rel="prefetch" href="/assets/js/41.54a80b5b.js"><link rel="prefetch" href="/assets/js/42.528644bd.js"><link rel="prefetch" href="/assets/js/43.2b20b08a.js"><link rel="prefetch" href="/assets/js/44.39d15baf.js"><link rel="prefetch" href="/assets/js/45.409a2f73.js"><link rel="prefetch" href="/assets/js/46.bb8a0393.js"><link rel="prefetch" href="/assets/js/47.6f62a59d.js"><link rel="prefetch" href="/assets/js/48.80fe8283.js"><link rel="prefetch" href="/assets/js/49.20ae9226.js"><link rel="prefetch" href="/assets/js/5.aa923b9f.js"><link rel="prefetch" href="/assets/js/50.720ce588.js"><link rel="prefetch" href="/assets/js/51.ee055520.js"><link rel="prefetch" href="/assets/js/52.db8024ec.js"><link rel="prefetch" href="/assets/js/53.db6b8de4.js"><link rel="prefetch" href="/assets/js/54.c68f4df6.js"><link rel="prefetch" href="/assets/js/55.6fe2fe9c.js"><link rel="prefetch" href="/assets/js/56.f0af1ea3.js"><link rel="prefetch" href="/assets/js/57.aeb5f296.js"><link rel="prefetch" href="/assets/js/58.74c12df1.js"><link rel="prefetch" href="/assets/js/59.515535be.js"><link rel="prefetch" href="/assets/js/6.aaf7bc2c.js"><link rel="prefetch" href="/assets/js/60.1e2fc034.js"><link rel="prefetch" href="/assets/js/61.b562d1ea.js"><link rel="prefetch" href="/assets/js/62.54e700e1.js"><link rel="prefetch" href="/assets/js/63.e96dce03.js"><link rel="prefetch" href="/assets/js/64.9c3e02b4.js"><link rel="prefetch" href="/assets/js/65.da5854a9.js"><link rel="prefetch" href="/assets/js/66.65e7cfee.js"><link rel="prefetch" href="/assets/js/67.803e7853.js"><link rel="prefetch" href="/assets/js/68.25443a64.js"><link rel="prefetch" href="/assets/js/69.e36f3808.js"><link rel="prefetch" href="/assets/js/7.0446ffdf.js"><link rel="prefetch" href="/assets/js/70.b60a4451.js"><link rel="prefetch" href="/assets/js/71.0191e84c.js"><link rel="prefetch" href="/assets/js/72.3dad034f.js"><link rel="prefetch" href="/assets/js/73.1179fd4a.js"><link rel="prefetch" href="/assets/js/74.bde0cad3.js"><link rel="prefetch" href="/assets/js/75.c162f1b3.js"><link rel="prefetch" href="/assets/js/76.cdfcc607.js"><link rel="prefetch" href="/assets/js/77.996fdb61.js"><link rel="prefetch" href="/assets/js/78.dcb8f619.js"><link rel="prefetch" href="/assets/js/79.bad633af.js"><link rel="prefetch" href="/assets/js/8.469ec99d.js"><link rel="prefetch" href="/assets/js/80.2f7a1523.js"><link rel="prefetch" href="/assets/js/81.797eaba5.js"><link rel="prefetch" href="/assets/js/82.6a2df574.js"><link rel="prefetch" href="/assets/js/83.cbc680e0.js"><link rel="prefetch" href="/assets/js/84.5388afed.js"><link rel="prefetch" href="/assets/js/85.7d4cea07.js"><link rel="prefetch" href="/assets/js/86.c11fbf1d.js"><link rel="prefetch" href="/assets/js/87.790b0647.js"><link rel="prefetch" href="/assets/js/88.834f69d7.js"><link rel="prefetch" href="/assets/js/89.c4ae495d.js"><link rel="prefetch" href="/assets/js/9.ea67d432.js"><link rel="prefetch" href="/assets/js/90.e6f16d66.js"><link rel="prefetch" href="/assets/js/91.b24a1a8c.js"><link rel="prefetch" href="/assets/js/92.aa972bd2.js"><link rel="prefetch" href="/assets/js/93.d94bc729.js"><link rel="prefetch" href="/assets/js/94.0db525a2.js"><link rel="prefetch" href="/assets/js/95.199f1a56.js"><link rel="prefetch" href="/assets/js/96.89478974.js"><link rel="prefetch" href="/assets/js/97.8711942e.js"><link rel="prefetch" href="/assets/js/98.a53b00a1.js"><link rel="prefetch" href="/assets/js/99.1d758b9f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0b428337.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c9315ac1.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/site/logo.png" alt="HelloCoder" class="logo"> <span class="site-name can-hide">HelloCoder</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/LearnJavaToFindAJob_README/" class="nav-link">《Java小白求职之路》</a></div><div class="nav-item"><a href="/pages/PureJavaCoderRoad_README/" class="nav-link">《小白学Java》</a></div><div class="nav-item"><a href="/pages/Java%E5%B8%B8%E7%94%A8%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" class="nav-link">脚手架工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机资源" class="dropdown-title"><!----> <span class="title" style="display:;">计算机资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/awesome-programming-resources/" class="nav-link">一些免费计算机资源</a></li><li class="dropdown-item"><!----> <a href="/pages/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%AF%95%E8%AE%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE/" class="nav-link">毕设建议</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专栏系列" class="dropdown-title"><!----> <span class="title" style="display:;">专栏系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/%EF%BC%88%E4%B8%80%EF%BC%89%E7%BA%BF%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/" class="nav-link">《从0到1学习Java多线程》</a></li><li class="dropdown-item"><!----> <a href="/pages/%EF%BC%881%EF%BC%89%E9%80%89%E6%8B%A9%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="nav-link">《从0到1搭建服务器》</a></li></ul></div></div><div class="nav-item"><a href="/pages/Java%E4%B9%A6%E6%9C%AC%E6%8E%A8%E8%8D%90/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/pages/%E5%85%B3%E4%BA%8E%E6%88%91/" class="nav-link">关于作者</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/LearnJavaToFindAJob_README/" class="nav-link">《Java小白求职之路》</a></div><div class="nav-item"><a href="/pages/PureJavaCoderRoad_README/" class="nav-link">《小白学Java》</a></div><div class="nav-item"><a href="/pages/Java%E5%B8%B8%E7%94%A8%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" class="nav-link">脚手架工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机资源" class="dropdown-title"><!----> <span class="title" style="display:;">计算机资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/awesome-programming-resources/" class="nav-link">一些免费计算机资源</a></li><li class="dropdown-item"><!----> <a href="/pages/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%AF%95%E8%AE%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE/" class="nav-link">毕设建议</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专栏系列" class="dropdown-title"><!----> <span class="title" style="display:;">专栏系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/%EF%BC%88%E4%B8%80%EF%BC%89%E7%BA%BF%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/" class="nav-link">《从0到1学习Java多线程》</a></li><li class="dropdown-item"><!----> <a href="/pages/%EF%BC%881%EF%BC%89%E9%80%89%E6%8B%A9%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="nav-link">《从0到1搭建服务器》</a></li></ul></div></div><div class="nav-item"><a href="/pages/Java%E4%B9%A6%E6%9C%AC%E6%8E%A8%E8%8D%90/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/pages/%E5%85%B3%E4%BA%8E%E6%88%91/" class="nav-link">关于作者</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>《PureJavaCoderRoad》</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>导读</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java高阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>开发辅助工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JavaEE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>中间件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>MQ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>Nginx</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/Nginx%E5%85%A5%E9%97%A8/" aria-current="page" class="active sidebar-link">Nginx入门</a></li><li><a href="/pages/Nginx%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/" class="sidebar-link">Nginx核心原理</a></li><li><a href="/pages/%E6%8E%A8%E8%8D%90%E4%B8%80%E6%AC%BENginx%E5%8F%AF%E8%A7%86%E5%8C%96%E6%93%8D%E4%BD%9C%E5%B7%A5%E5%85%B7/" class="sidebar-link">推荐一款Nginx可视化操作工具</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>建议</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0d043077><div class="articleInfo" data-v-0d043077><ul class="breadcrumbs" data-v-0d043077><li data-v-0d043077><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0d043077></a></li> <li data-v-0d043077><a href="/categories/?category=PureJavaCoderRoad" title="分类" data-v-0d043077>PureJavaCoderRoad</a></li><li data-v-0d043077><a href="/categories/?category=%E4%B8%AD%E9%97%B4%E4%BB%B6" title="分类" data-v-0d043077>中间件</a></li><li data-v-0d043077><a href="/categories/?category=Nginx" title="分类" data-v-0d043077>Nginx</a></li></ul> <div class="info" data-v-0d043077><div title="标签" class="iconfont icon-biaoqian tags" data-v-0d043077><a href="/tags/?tag=Nginx" target="_blank" title="标签" class="beLink" data-v-0d043077>

          #Nginx

        </a><a href="/tags/?tag=%E5%85%A5%E9%97%A8" target="_blank" title="标签" class="beLink" data-v-0d043077>

          #入门

        </a></div> <div title="作者" class="author iconfont icon-touxiang" data-v-0d043077><a href="/pages/%E5%85%B3%E4%BA%8E%E6%88%91/" target="_blank" title="作者" class="beLink" data-v-0d043077>程序员阿雨</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0d043077><a href="javascript:;" data-v-0d043077>2022-05-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div id="right-menu-content" class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Nginx入门<!----></h1>  <div class="theme-vdoing-content content__default"><p>几乎所有的项目部署，都会用到Nginx。</p> <p>主要用到Nginx的功能有如下：</p> <ul><li>正向、反向代理</li> <li>过滤IP</li> <li>负载均衡</li></ul> <p>这三个功能是大部分公司的线上项目部署用到的，掌握Nginx并不难，主要是学会配置<code>nginx.conf</code> 文件，这个文件是用到了一些Nginx的语法，会用简单，但是用好却很难。</p> <p>下面来简单介绍一下Nginx。</p> <h2 id="_1、nginx介绍"><a href="#_1、nginx介绍" class="header-anchor">#</a> 1、Nginx介绍</h2> <p>Nginx下载地址：<a href="http://nginx.org" target="_blank" rel="noopener noreferrer">http://nginx.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Nginx 是开源、高性能、高可靠的 Web 和反向代理服务器，而且支持热部署，几乎可以做到 7 * 24 小时不间断运行，即使运行几个月也不需要重新启动，还能在不间断服务的情况下对软件版本进行热更新。</p> <p>如果你是前端，相信你用过Node作为服务器。</p> <p>如果你是后端，相信你用过Tomcat作为服务器。</p> <p>Nginx也作为一个轻量级的服务器，其功能与Node、Tomcat是不冲突的。</p> <p>Nginx的优势就是其性能，其占用内存少、并发能力强、能支持高达 5w 个并发连接数。</p> <p>所以Nginx一般被用来当做服务器的第一道门，其应用场景有：</p> <ul><li>正向、反向代理</li> <li>过滤IP，白名单</li> <li>负载均衡</li> <li>静态资源服务</li></ul> <h2 id="_2、nginx的一些概念"><a href="#_2、nginx的一些概念" class="header-anchor">#</a> 2、Nginx的一些概念</h2> <p>在学习Nginx之前，先要了解一下下面几个概念，做简单了解即可。</p> <h3 id="_2-1、cors"><a href="#_2-1、cors" class="header-anchor">#</a> 2.1、CORS</h3> <p>CORS是一个W3C标准，全称是&quot;跨域资源共享&quot;（Cross-origin resource sharing），也就是我们常说的<strong>跨域</strong>。</p> <p>在浏览器上当前访问的网站向另一个网站发送请求获取数据的过程就是<strong>跨域请求</strong>。因为浏览器有安全策略，不然随便访问其他网站资源很可能会造成安全隐患，而CORS就可以打破这个限制。</p> <p>它允许浏览器向跨源服务器发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</p> <p>CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。</p> <p>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。</p> <p>浏览器将CORS请求分成两类：<code>简单请求（simple request）</code>和<code>非简单请求（not-so-simple request</code>）。</p> <blockquote><p>简单的说，浏览器在发送跨域请求的时候，会先判断下是简单请求还是非简单请求，如果是简单请求，就先执行服务端程序，然后浏览器才会判断是否跨域。</p></blockquote> <p>以下是一些跨域的例子：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 不同源的例子</span>
http://example.com/app1   <span class="token comment"># 协议不同</span>
https://example.com/app2

http://example.com        <span class="token comment"># host 不同</span>
http://www.example.com
http://myapp.example.com

http://example.com        <span class="token comment"># 端口不同</span>
http://example.com:8080
</code></pre></div><h3 id="_2-2、两种请求"><a href="#_2-2、两种请求" class="header-anchor">#</a> 2.2、两种请求</h3> <h4 id="_2-2-1、简单请求"><a href="#_2-2-1、简单请求" class="header-anchor">#</a> 2.2.1、简单请求</h4> <ol><li>请求方法是 <code>HEAD</code>、<code>GET</code>、<code>POST</code> 三种之一；</li> <li>HTTP 头信息不超过这几个字段：<code>Accept</code>、<code>Accept-Language</code>、<code>Content-Language</code>、<code>Last-Event-ID</code> <code>Content-Type</code></li> <li>而且<code>Content-Type</code> 只限于三个值 <code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code>、<code>text/plain</code>；</li></ol> <p>如果<strong>同时满足上面三个条件</strong>的，就属于<strong>简单请求</strong>。</p> <p>凡是<strong>不同时满足上面三个条件</strong>的，就属于<strong>非简单请求</strong>。</p> <p>对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个<code>Origin</code>字段。</p> <p>✈️</p> <p>下面是一个例子，浏览器发现这次跨源AJAX请求是简单请求，就自动在头信息之中，添加一个<code>Origin</code>字段。</p> <blockquote><p>GET /cors HTTP/1.1
Origin: http://rain.baimuxym.cn
Host: api.alice.com
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0…</p></blockquote> <p>上面的头信息中，<code>Origin</code>字段用来说明，本次请求来自哪个源（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求，Host是目前的域名。</p> <p>如果<code>Origin</code>指定的源，不在许可范围内，服务器会返回一个正常的HTTP回应。浏览器发现，这个回应的头信息没有包含<code>Access-Control-Allow-Origin</code>字段（详见下文），就知道出错了，从而抛出一个错误，被<code>XMLHttpRequest</code>的<code>onerror</code>回调函数捕获。注意，这种错误无法通过状态码识别，因为HTTP回应的状态码有可能是200。</p> <p>如果<code>Origin</code>指定的域名在许可范围内，服务器返回的响应，会多出几个头信息字段。</p> <blockquote><p>Access-Control-Allow-Origin: http://rain.baimuxym.cn
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: FooBar
Content-Type: text/html; charset=utf-8</p></blockquote> <h4 id="_2-2-2、非简单请求"><a href="#_2-2-2、非简单请求" class="header-anchor">#</a> 2.2.2、非简单请求</h4> <p>常见的<strong>非简单请求</strong>有：</p> <ul><li><p>put，delete 方法的ajax请求</p></li> <li><p>发送json格式的ajax请求，<code>Content-Type</code> 值为 <code>application/json</code></p></li> <li><p>带自定义头的ajax请求</p></li></ul> <p>非简单请求的CORS请求，会在正式通信之前，<strong>增加一次HTTP查询请求，称为&quot;预检&quot;请求（preflight）</strong>，浏览器发送一次 HTTP 预检 <code>OPTIONS</code>请求，先询问服务器，当前网页所在的<strong>域名是否在服务器的许可名单之中</strong>，以及可以使用哪些 HTTP 请求方法和头信息字段。</p> <p>下面是这个&quot;预检&quot;请求的HTTP头信息。</p> <blockquote><p>OPTIONS /cors HTTP/1.1
Origin: http://rain.baimuxym.cn
Access-Control-Request-Method: PUT
Access-Control-Request-Headers: X-Custom-Header
Host: api.alice.com
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0…</p></blockquote> <p>&quot;预检&quot;请求用的请求方法是<code>OPTIONS</code>，表示这个请求是用来询问的。头信息里面，关键字段是<code>Origin</code>，表示请求来自哪个源。</p> <p>服务器收到&quot;预检&quot;请求以后，检查了<code>Origin</code>、<code>Access-Control-Request-Method</code>和<code>Access-Control-Request-Headers</code>字段以后，确认允许跨源请求，就可以做出回应。</p> <p>只有得到肯定答复，浏览器才会发出正式的 <code>XHR</code> 请求，否则报错。</p> <p>以上简单介绍了一下跨域的原理，其实跨域的解决方法在前端和后端都可以配置，方法也很多，这里就不展开讲了。</p> <h3 id="_2-3、正向代理和反向代理"><a href="#_2-3、正向代理和反向代理" class="header-anchor">#</a> 2.3、正向代理和反向代理</h3> <p><strong>正向代理</strong>是一个位于客户端和原始服务器之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定原始服务器，然后代理向原始服务器转交请求并将获得的内容返回给客户端。代理服务器和客户端处于同一个局域网内。</p> <p>比如说 你要访问 pornhub，你的浏览器是无法直接的，于是我就通过代理服务器（fanqiang）让它帮我转发，这种方式是客户端指定请求URL的。</p> <blockquote><p>&quot;喂？是代理服务器吗，帮我访问一下 www.pornhub.com&quot;，正向代理的工作原理就像一个跳板。</p></blockquote> <p><strong>反向代理</strong>实际运行方式是代理服务器接受网络上的连接请求。它将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给网络上请求连接的客户端 。</p> <p>代理服务器和原始服务器处于同一个局域网内。反向代理隐藏了真实的服务器，为服务器收发请求，使真实服务器对客户端不可见。一般在处理跨域请求的时候比较常用。</p> <p>比如说我要访问 https://rain.baimuxym.cn/images.jpg，对我来说不知道图片是不是同一个服务器返回回来的，甚至这个图片根本不在这台服务器，图片可以是服务器偷偷从其他 服务器，比如从 https://images.baimuxym.cn 拿回来的，但是用户并不知情。</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201028150646664.png" alt=" "></p> <p><strong>代理的好处：</strong></p> <ul><li>保护了真实的web服务器，保证了web服务器的资源安全</li></ul> <p>只用于代理内部网络对Internet外部网络的连接请求，不支持外部网络对内部网络的连接请求，因为内部网络对外部网络是不可见的。所有的静态网页或者CGI程序，都保存在内部的Web服务器上。因此对反向代理服务器的攻击并不会使得网页信息遭到破坏，这样就增强了Web服务器的安全性。</p> <ul><li>节约了有限的IP地址资源</li></ul> <p>共享一个在internet中注册的IP地址（内网局域网），这些服务器分配私有地址，采用虚拟主机的方式对外提供服务。</p> <ul><li>减少WEB服务器压力，提高响应速度</li></ul> <p>负载的实现方式之一，不同的资源可以放在不同的服务器。（下面提到的负载均衡、动静分离也是通过反向代理实现的）</p> <h3 id="_2-4、负载均衡"><a href="#_2-4、负载均衡" class="header-anchor">#</a> 2.4、负载均衡</h3> <p>随着业务的发展，单个机器性能有限，无法承受巨大的请求压力，这个时候集群的概念产生了，将请求分发到各个服务器上（每台服务器的代码都是一样的），将负载分发到不同的服务器，这就是<strong>负载均衡</strong>，核心是「分摊压力」。</p> <p>如何分发压力？Nginx也可以配置规则，比如说权重、轮询、hash 等等。</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210429101548741.png" alt=""></p> <h3 id="_2-5、动静分离"><a href="#_2-5、动静分离" class="header-anchor">#</a> 2.5、动静分离</h3> <p>动静分离的初衷是为了<strong>加快网站的访问速度</strong>。像大图片、视频、CSS 这种静态资源，如果都放在同一个服务器，在请求的时候就会造成带宽压力，如果把这些静态资源分散到不同的服务器，配合CDN，就可以减少服务器的压力。</p> <p>由于 Nginx 的高并发和静态资源缓存等特性，经常将静态资源部署在 Nginx 上。</p> <p>如果请求的是静态资源，直接到静态资源目录获取资源，如果是动态资源的请求，则利用<strong>反向代理</strong>的原理，把请求转发给对应后台应用去处理，从而实现动静分离。</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210429101604508.png" alt=""></p> <h2 id="_3、安装nginx"><a href="#_3、安装nginx" class="header-anchor">#</a> 3、安装Nginx</h2> <p>Nginx下载地址：https://nginx.org/en/download.html</p> <p>我这里演示的Linux Centos7的安装，如果你是Windows，那就更简单了，直接解压即可。</p> <p><strong>1、gcc 安装</strong></p> <p>Nginx 是 C语言 开发，安装 Nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境，如果没有 gcc 环境，则需要安装：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> gcc-c++
</code></pre></div><p>我这里显示已经是最新了：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@VM-8-8-centos ~<span class="token punctuation">]</span><span class="token comment"># yum install gcc-c++</span>
Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
Package gcc-c++-4.8.5-39.el7.x86_64 already installed and latest version
Nothing to <span class="token keyword">do</span>
</code></pre></div><p><strong>2、 PCRE pcre-devel 安装</strong>
PCRE(Perl Compatible Regular Expressions) 是一个Perl库，包括 perl 兼容的正则表达式库。nginx 的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，pcre-devel 是使用 pcre 开发的一个二次开发库。</p> <p>nginx也需要此库。命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> -y pcre pcre-devel
</code></pre></div><p><strong>3、zlib 安装</strong>
zlib 库提供了很多种压缩和解压缩的方式， nginx 使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> -y zlib zlib-devel
</code></pre></div><p><strong>4、OpenSSL 安装</strong>
OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及 SSL 协议，并提供丰富的应用程序供测试或其它目的使用。
nginx 不仅支持 http 协议，还支持 https（即在ssl协议上传输http），所以需要在 Centos 安装 OpenSSL 库。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> -y openssl openssl-devel
</code></pre></div><p><strong>5、Nginx解压</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> -zxvf nginx-1.15.2.tar.gz -C /var/www/web
</code></pre></div><p><strong>6、编译Nginx</strong></p> <p>进入Nginx安装目录，输入 <code>./configure</code>，表示使用Nginx的默认配置，开启ssl</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@VM-8-8-centos software<span class="token punctuation">]</span><span class="token comment"># cd /var/www/web/nginx-1.15.2/</span>
<span class="token punctuation">[</span>root@VM-8-8-centos nginx-1.15.2<span class="token punctuation">]</span><span class="token comment"># ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span>
</code></pre></div><blockquote><p>注意！<code>--prefix=/usr/local/nginx</code> 的意思是Nginx安装目录，如果不写默认的目录也是这个，如果你自定义，在下一步需要到你自定义的目录执行<code>make</code>和<code>make install</code></p></blockquote> <p>然后输入：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">make</span>
</code></pre></div><p>编译成功再输入：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><p>Nginx的默认安装目录是 <code>/usr/local/nginx</code></p> <p><strong>7、启动Nginx</strong></p> <p>Nginx的默认配置，是指向 <code>/usr/local/nginx/sbin/</code>这个目录的，配置文件是这里 <code>/usr/local/nginx/conf</code></p> <p>Nginx常用命令：（需要在安装目录执行，我的是 <code>/usr/local/nginx/sbin/</code> ）</p> <div class="language- extra-class"><pre class="language-text"><code>./nginx  # 启动
./nginx -s stop #停止
./nginx -s reload #重启
</code></pre></div><p>启动，成功找到Nginx的进程。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@VM-8-8-centos nginx-1.15.2<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/nginx/sbin/</span>
<span class="token punctuation">[</span>root@VM-8-8-centos sbin<span class="token punctuation">]</span><span class="token comment"># ./nginx</span>
<span class="token punctuation">[</span>root@VM-8-8-centos sbin<span class="token punctuation">]</span><span class="token comment"># ps -aux|grep nginx</span>
root     <span class="token number">11505</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">20556</span>   <span class="token number">616</span> ?        Ss   <span class="token number">18</span>:00   <span class="token number">0</span>:00 nginx: master process ./nginx
nobody   <span class="token number">11506</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">23092</span>  <span class="token number">1384</span> ?        S    <span class="token number">18</span>:00   <span class="token number">0</span>:00 nginx: worker process
root     <span class="token number">11545</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span> <span class="token number">112712</span>   <span class="token number">960</span> pts/4    R+   <span class="token number">18</span>:00   <span class="token number">0</span>:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto nginx
</code></pre></div><p>然后浏览器输入自己的IP，出现<strong>Welcome to Nginx</strong> 就表示成功了。</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210116125047136.png" alt=""></p> <p>为了方便使用，我们把Nginx添加到全局变量：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-8-8-centos sbin<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/</span>
</code></pre></div><p>添加完毕，我们在任何一个目录就可以使用Nginx命令了。</p> <p>这里要记住的是你的Nginx配置文件<code>nginx.conf</code> 目录是：<code>/usr/local/nginx/conf/nginx.conf</code></p> <h2 id="_4、nginx常见命令"><a href="#_4、nginx常见命令" class="header-anchor">#</a> 4、Nginx常见命令</h2> <p>这里是把Nginx添加到全局变量才能这样操作，否则需要进入到 <code>/usr/local/nginx/sbin/</code> 目录，windows直接进入安装目录即可。</p> <div class="language- extra-class"><pre class="language-text"><code>帮助命令：nginx -h
启动Nginx服务器 ： nginx
查看进程： ps aux | grep nginx
配置文件路径：/usr/local/nginx/conf/nginx.conf
检查配置文件： nginx -t
指定启动配置文件： nginx -c /usr/local/nginx/conf/nginx.conf
暴力停止服务： nginx -s stop
优雅停止服务： nginx -s quit
重新加载配置文件： nginx -s reload
</code></pre></div><h2 id="_5、nginx的配置"><a href="#_5、nginx的配置" class="header-anchor">#</a> 5、Nginx的配置</h2> <h3 id="_5-1、nginx的构成"><a href="#_5-1、nginx的构成" class="header-anchor">#</a> 5.1、Nginx的构成</h3> <p>打开<code>/usr/local/nginx/conf/nginx.conf</code> 文件，windows的配置文件在安装目录的 <code>conf/nginx.conf</code></p> <div class="language- extra-class"><pre class="language-text"><code>main        # 全局配置，也称为Main块，对全局生效
├── events  # 配置影响 Nginx 服务器或与用户的网络连接
├── http    # 配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置
│   ├── upstream # 配置后端服务器具体地址，负载均衡配置不可或缺的部分
│   ├── server   # 配置虚拟主机的相关参数，一个 http 块中可以有多个 server 块
│   ├── server
│   │   ├── location  # server 块可以包含多个 location 块，location 指令用于匹配 uri 
│   │   ├── location
│   │   └── ...
│   └── ...
└── ...
</code></pre></div><p>这个就像是Java的类一样，有公共的，也有私有的，server就像是一个 <code>if</code>  语法块，location又是一个子<code>if</code>语法块，只有匹配到了才会进入最后的URL。</p> <p>一个 Nginx 配置文件的结构就像 <code>nginx.conf</code> 显示的那样，配置文件的语法规则：</p> <ol><li>配置文件由指令与指令块构成；</li> <li>每条指令以 <code>;</code> 分号结尾，指令与参数间以空格符号分隔；</li> <li>指令块以 <code>{}</code> 大括号将多条指令组织在一起；</li> <li><code>include</code> 语句允许组合多个配置文件以提升可维护性；</li> <li>使用 <code>#</code> 符号添加注释，提高可读性；</li> <li>使用 <code>$</code> 符号使用变量；</li> <li>部分指令的参数支持正则表达式；</li></ol> <h3 id="_5-2、nginx的典型配置"><a href="#_5-2、nginx的典型配置" class="header-anchor">#</a> 5.2、Nginx的典型配置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#-----------全局块 START-----------</span>
user  nobody<span class="token punctuation">;</span>                        <span class="token comment"># 运行用户，默认即是nginx，可以不进行设置</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token comment"># Nginx 进程数，一般设置为和 CPU 核数一样</span>
worker_processes auto<span class="token punctuation">;</span> 			   <span class="token comment"># Nginx 进程数 与当前 CPU 物理核心数一致</span>
error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span>   <span class="token comment"># Nginx 的错误日志存放目录，日志级别是warn</span>
pid        /var/run/nginx.pid<span class="token punctuation">;</span>      <span class="token comment"># Nginx 服务启动时的 pid 存放位置</span>
worker_rlimit_nofile <span class="token number">20480</span><span class="token punctuation">;</span> <span class="token comment"># 可以理解成每个 worker 子进程的最大连接数量。</span>

<span class="token comment">#-----------全局块 END-----------</span>

<span class="token comment">#-----------events块 START-----------</span>
events <span class="token punctuation">{</span>
    accept_mutex on<span class="token punctuation">;</span>   <span class="token comment">#设置网路连接序列化，防止惊群现象发生，默认为on</span>
    multi_accept on<span class="token punctuation">;</span>  <span class="token comment">#设置一个进程是否同时接受多个网络连接，默认为off</span>
     <span class="token comment"># 事件驱动模型有 select|poll|kqueue|epoll|resig|/dev/poll|eventport</span>
    use epoll<span class="token punctuation">;</span>   <span class="token comment">#使用 epoll的I/O模型，建议使用默认</span>
    worker_connections <span class="token number">1024</span><span class="token punctuation">;</span>   <span class="token comment"># 每个进程允许最大并发数</span>
<span class="token punctuation">}</span>
<span class="token comment">#-----------events块 END-----------</span>

http <span class="token punctuation">{</span>   <span class="token comment"># 配置使用最频繁的部分，代理、缓存、日志定义等绝大多数功能和第三方模块的配置都在这里设置</span>
    <span class="token comment"># 设置日志自定义格式</span>
    log_format  myFormat  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    access_log  /var/log/nginx/access.log  myFormat<span class="token punctuation">;</span>   <span class="token comment"># Nginx访问日志存放位置，并采用上面定义好的格式</span>

    sendfile            on<span class="token punctuation">;</span>   <span class="token comment"># 开启高效传输模式</span>
    tcp_nopush          on<span class="token punctuation">;</span>   <span class="token comment"># 减少网络报文段的数量</span>
    tcp_nodelay         on<span class="token punctuation">;</span>
    keepalive_timeout   <span class="token number">65</span><span class="token punctuation">;</span>   <span class="token comment"># 保持连接的时间，也叫超时时间，单位秒</span>
    types_hash_max_size <span class="token number">2048</span><span class="token punctuation">;</span>

    include             /etc/nginx/mime.types<span class="token punctuation">;</span>      <span class="token comment"># 文件扩展名与类型映射表</span>
    default_type        application/octet-stream<span class="token punctuation">;</span>   <span class="token comment"># 默认文件类型</span>

    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span>   <span class="token comment"># 使用include引入其他子配置项，不存在会报错</span>
    
    server <span class="token punctuation">{</span>
        keepalive_requests <span class="token number">120</span><span class="token punctuation">;</span> <span class="token comment">#单连接请求上限次数。</span>
    	listen       <span class="token number">80</span><span class="token punctuation">;</span>       <span class="token comment"># 配置监听的端口</span>
    	server_name  localhost <span class="token number">127.0</span>.0.1 baimuxym.cn<span class="token punctuation">;</span>    <span class="token comment"># 配置监听的域名或者地址，可多个，用空格隔开</span>
    	
    	location / <span class="token punctuation">{</span>
    		root   /usr/share/nginx/html<span class="token punctuation">;</span>  <span class="token comment"># 网站根目录</span>
    		index  index.html index.htm<span class="token punctuation">;</span>   <span class="token comment"># 默认首页文件</span>
    		deny <span class="token number">172.18</span>.5.54   <span class="token comment"># 禁止访问的ip地址，可以为all</span>
    		allow <span class="token number">172.18</span>.5.53<span class="token punctuation">;</span><span class="token comment"># 允许访问的ip地址，可以为all</span>
    	<span class="token punctuation">}</span>
    	  <span class="token comment"># 图片防盗链</span>
         location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
            valid_referers none blocked <span class="token number">192.168</span>.0.2<span class="token punctuation">;</span>  <span class="token comment"># 只允许本机 IP 外链引用</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token builtin class-name">return</span> <span class="token number">403</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
    	
    	<span class="token comment">#新增内容，可以在自己的server单独配置错误日志</span>
    	error_log    logs/error_localhost.log    error<span class="token punctuation">;</span>
        
    	error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>  <span class="token comment"># 默认50x对应的访问页面</span>
    	error_page <span class="token number">400</span> <span class="token number">404</span> error.html<span class="token punctuation">;</span>   <span class="token comment"># 同上</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>特别说明一下：</strong></p> <h4 id="_1、error-log的默认值"><a href="#_1、error-log的默认值" class="header-anchor">#</a> 1、error_log的默认值</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>error_log logs/error.log error<span class="token punctuation">;</span>
</code></pre></div><p>error_log的语法格式及参数语法说明如下：</p> <div class="language- extra-class"><pre class="language-text"><code> error_log  &lt;FILE&gt;  &lt;LEVEL&gt;;
 关键字     日志文件  错误日志级别
</code></pre></div><p>关键字：其中关键字error_log不能改变</p> <p>日志文件：可以指定任意存放日志的目录</p> <p>错误日志级别：常见的错误日志级别有<code>[debug | info | notice | warn | error | crit | alert | emerg]</code>，级别越高记录的信息越少。</p> <blockquote><p>生产场景一般是 warn | error | crit 这三个级别之一</p> <p>注意：不要配置info等级较低的级别，会带来大量的磁盘I/O消耗。</p></blockquote> <p>error_log参数允许放置的标签段位置：</p> <div class="language- extra-class"><pre class="language-text"><code>main, http, server, location
</code></pre></div><p>测试了一下，日志文件不存在，Nginx不会创建，所以要提前手动创建。</p> <h4 id="_2、events-块"><a href="#_2、events-块" class="header-anchor">#</a> 2、events 块</h4> <p>events 块涉及的指令主要影响 Nginx 服务器与用户的网络连接，常用的设置包括是否开启对多 work process 下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型来处理连接请求，每个 word process 可以同时支持的最大连接数等。 上述例子就表示每个 work process 支持的最大连接数为 1024，这部分的配置对 Nginx 的性能影响较大，在实际中应该灵活配置。</p> <h3 id="_5-3-、nginx的location"><a href="#_5-3-、nginx的location" class="header-anchor">#</a> 5.3 、Nginx的location</h3> <p>server 块可以包含多个 location 块，location 指令用于匹配 uri，语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>location <span class="token punctuation">[</span> <span class="token operator">=</span> <span class="token operator">|</span> ~ <span class="token operator">|</span> ~* <span class="token operator">|</span> ^~ <span class="token punctuation">]</span>  /uri/  <span class="token punctuation">{</span>
	<span class="token punctuation">..</span>.
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>=</code> 开头表示精确匹配，如果匹配成功，不再进行后续的查找；</li> <li><code>^</code>  以xxx开头的匹配</li> <li><code>$</code>  以xxx结尾的匹配</li> <li><code>*</code>  代表任意字符</li> <li><code>^~</code> 匹配<strong>开头以 xxx 的路径</strong>，理解为匹配 url 路径即可。nginx不对url做编码，因此请求为<code>/static/20%/HaC</code>，可以被规则<code>^~ /static/ /HaC</code>匹配到（注意是空格）</li> <li><code>~</code> 开头表示<strong>区分大小写</strong>的正则匹配</li> <li><code>~*</code> 开头表示<strong>不区分大小写</strong>的正则匹配</li> <li><code>!</code> 表示不包含xxx就匹配</li> <li><code>/</code> 通用匹配，任何请求都会匹配到。</li></ul> <p><code>~*</code> 和 <code>~</code>优先级都比较低，如有多个location的正则能匹配的话，则使用正则表达式最长的那个；</p> <p>如果 uri 包含正则表达式，则必须要有 <code>~</code> 或 <code>~*</code> 标志。</p> <p>借用<a href="https://www.cnblogs.com/jpfss/p/10232980.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/jpfss/p/10232980.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>博客一文的例子来说明一下：</p> <div class="language-php extra-class"><pre class="language-php"><code>server <span class="token punctuation">{</span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  localhost<span class="token punctuation">;</span>
    location <span class="token operator">=</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
       <span class="token comment">#规则A</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">=</span> <span class="token operator">/</span>login <span class="token punctuation">{</span>
       <span class="token comment">#规则B</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">^</span><span class="token operator">~</span> <span class="token operator">/</span><span class="token keyword">static</span><span class="token operator">/</span> <span class="token punctuation">{</span>
       <span class="token comment">#规则C</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">~</span> \<span class="token operator">.</span><span class="token punctuation">(</span><span class="token class-name">gif</span><span class="token operator">|</span><span class="token class-name">jpg</span><span class="token operator">|</span><span class="token class-name">png</span><span class="token operator">|</span><span class="token class-name">js</span><span class="token operator">|</span><span class="token class-name">css</span><span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
       <span class="token comment">#规则D，注意：是根据括号内的大小写进行匹配。括号内全是小写，只匹配小写</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">~</span><span class="token operator">*</span> \<span class="token operator">.</span><span class="token class-name type-declaration">png</span>$ <span class="token punctuation">{</span>
       <span class="token comment">#规则E</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">!</span><span class="token operator">~</span> \<span class="token operator">.</span><span class="token class-name type-declaration">xhtml</span>$ <span class="token punctuation">{</span>
       <span class="token comment">#规则F</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">!</span><span class="token operator">~</span><span class="token operator">*</span> \<span class="token operator">.</span><span class="token class-name type-declaration">xhtml</span>$ <span class="token punctuation">{</span>
       <span class="token comment">#规则G</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">/</span> <span class="token punctuation">{</span>
       <span class="token comment">#规则H</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>那么产生的效果如下：</strong></p> <ul><li><p>访问根目录/， 比如http://localhost/ 将匹配规则A</p></li> <li><p>访问 http://localhost/login 将匹配规则B，http://localhost/register 则匹配规则H</p></li> <li><p>访问 http://localhost/static/a.html 将匹配规则C</p></li> <li><p>访问 http://localhost/a.gif, http://localhost/b.jpg 将匹配规则D和规则E，但是规则D顺序优先，规则E不起作用， 而 http://localhost/static/c.png 则优先匹配到 规则C</p></li> <li><p>访问 http://localhost/a.PNG 则匹配规则E， 而不会匹配规则D，因为规则E不区分大小写。</p></li> <li><p>访问 http://localhost/a.xhtml 不会匹配规则F和规则G，http://localhost/a.XHTML不会匹配规则G，（因为 !）。规则F，规则G属于排除法，符合匹配规则也不会匹配到，所以想想看实际应用中哪里会用到。</p></li> <li><p>访问 http://localhost/category/id/1111 则最终匹配到规则H，因为以上规则都不匹配，这个时候nginx转发请求给后端应用服务器，比如FastCGI（php），tomcat（jsp），nginx作为方向代理服务器存在。</p></li></ul> <p>所以实际使用中，个人觉得至少有三个匹配规则定义，如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#直接匹配网站根，通过域名访问网站首页比较频繁，使用这个会加速处理，官网如是说。</span>
<span class="token comment">#这里是直接转发给后端应用服务器了，也可以是一个静态首页</span>
<span class="token comment"># 第一个必选规则</span>
location <span class="token operator">=</span> / <span class="token punctuation">{</span>
	<span class="token comment">#反向代理</span>
    proxy_pass http://127.0.0.1:8080/index
<span class="token punctuation">}</span>
 
<span class="token comment"># 第二个必选规则是处理静态文件请求，这是nginx作为http服务器的强项</span>
<span class="token comment"># 有两种配置模式，目录匹配或后缀匹配,任选其一或搭配使用</span>
location ^~ /static/ <span class="token punctuation">{</span>                              //以xx开头
    root /webroot/static/<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>css<span class="token operator">|</span>js<span class="token operator">|</span>ico<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>     //以xx结尾
    root /webroot/res/<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">#第三个规则就是通用规则，用来转发动态请求到后端应用服务器</span>
<span class="token comment">#非静态文件请求就默认是动态请求，自己根据实际把握</span>
location / <span class="token punctuation">{</span>
    proxy_pass http://tomcat:8080/
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-4、nginx的全局变量"><a href="#_5-4、nginx的全局变量" class="header-anchor">#</a> 5.4、Nginx的全局变量</h3> <p>Nginx提供了一些全局变量，我们可以在任意的位置使用这些变量。</p> <table><thead><tr><th style="text-align:left;">全局变量名</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>$host</code></td> <td style="text-align:left;">请求信息中的 <code>Host</code>，如果请求中没有 <code>Host</code>行，则等于设置的服务器名，不包含端口</td></tr> <tr><td style="text-align:left;"><code>$request_method</code></td> <td style="text-align:left;">客户端请求类型，如 <code>GET</code>、<code>POST</code></td></tr> <tr><td style="text-align:left;"><code>$remote_addr</code></td> <td style="text-align:left;">客户端的 <code>IP</code> 地址</td></tr> <tr><td style="text-align:left;"><code>$args</code></td> <td style="text-align:left;">请求中的参数</td></tr> <tr><td style="text-align:left;"><code>$arg_PARAMETER</code></td> <td style="text-align:left;"><code>GET</code> 请求中变量名 PARAMETER 参数的值，例如：<code>$http_user_agent</code>(Uaer-Agent 值), <code>$http_referer</code>...</td></tr> <tr><td style="text-align:left;"><code>$content_length</code></td> <td style="text-align:left;">请求头中的 <code>Content-length</code> 字段</td></tr> <tr><td style="text-align:left;"><code>$http_user_agent</code></td> <td style="text-align:left;">客户端agent信息</td></tr> <tr><td style="text-align:left;"><code>$http_cookie</code></td> <td style="text-align:left;">客户端cookie信息</td></tr> <tr><td style="text-align:left;"><code>$remote_addr</code></td> <td style="text-align:left;">客户端的IP地址</td></tr> <tr><td style="text-align:left;"><code>$remote_port</code></td> <td style="text-align:left;">客户端的端口</td></tr> <tr><td style="text-align:left;"><code>$http_user_agent</code></td> <td style="text-align:left;">客户端agent信息</td></tr> <tr><td style="text-align:left;"><code>$server_protocol</code></td> <td style="text-align:left;">请求使用的协议，如 <code>HTTP/1.0</code>、<code>HTTP/1.1</code></td></tr> <tr><td style="text-align:left;"><code>$server_addr</code></td> <td style="text-align:left;">服务器地址</td></tr> <tr><td style="text-align:left;"><code>$server_name</code></td> <td style="text-align:left;">服务器名称</td></tr> <tr><td style="text-align:left;"><code>$server_port</code></td> <td style="text-align:left;">服务器的端口号</td></tr> <tr><td style="text-align:left;"><code>$scheme</code></td> <td style="text-align:left;">HTTP类型（如http，https）</td></tr></tbody></table> <h3 id="_5-5、nginx的语法"><a href="#_5-5、nginx的语法" class="header-anchor">#</a> 5.5、Nginx的语法</h3> <h4 id="_5-5-1、return"><a href="#_5-5-1、return" class="header-anchor">#</a> 5.5.1、return</h4> <p>有点类似于Java编程，Nginx也可以使用<code>return</code>关键字进行返回。</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">return</span> code <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin class-name">return</span> code URL<span class="token punctuation">;</span>
<span class="token builtin class-name">return</span> URL<span class="token punctuation">;</span>
</code></pre></div><p>例如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
 <span class="token builtin class-name">return</span> <span class="token number">404</span><span class="token punctuation">;</span> <span class="token comment"># 直接返回状态码</span>
<span class="token punctuation">}</span>

location / <span class="token punctuation">{</span>
 <span class="token builtin class-name">return</span> <span class="token number">404</span> <span class="token string">&quot;pages not found&quot;</span><span class="token punctuation">;</span> <span class="token comment"># 返回状态码 + 一段文本</span>
<span class="token punctuation">}</span>

location / <span class="token punctuation">{</span>
 <span class="token builtin class-name">return</span> <span class="token number">302</span> /bbs <span class="token punctuation">;</span> <span class="token comment"># 返回状态码 + 重定向地址</span>
<span class="token punctuation">}</span>

location / <span class="token punctuation">{</span>
 <span class="token builtin class-name">return</span> https://www.rain.baimuxym.cn <span class="token punctuation">;</span> <span class="token comment"># 返回重定向地址</span>
<span class="token punctuation">}</span>
</code></pre></div><p>和<code>return</code>相似的还有<code>break</code>，跳出当前作用域，回到上一层继续向下，可以在server块,location块,if块中使用。</p> <h4 id="_5-5-2、rewrite"><a href="#_5-5-2、rewrite" class="header-anchor">#</a> 5.5.2、rewrite</h4> <p>重写。（可以理解为重定向）</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>rewrite 正则表达式 要替换的内容 <span class="token punctuation">[</span>flag<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>rewrite 最后面还可以接参数：</p> <ul><li>redirect 返回 302 临时重定向；</li> <li>permanent 返回 301 永久重定向；</li></ul></blockquote> <p>例子：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
     listen       <span class="token number">80</span><span class="token punctuation">;</span>
     server_name  localhost<span class="token punctuation">;</span>
     charset      utf-8<span class="token punctuation">;</span>
      
     location / <span class="token punctuation">{</span>
     <span class="token comment"># 浏览器访问 ip:80/test/，实际访问的是 http://www.baidu.com</span>
         rewrite <span class="token string">'^/test/'</span> http://www.baidu.com <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     location /image/ <span class="token punctuation">{</span>
     <span class="token comment"># 其中$1表示引用前面的([a-z]{3}),$2表示引用前面的'(.*)'</span>
    	 rewrite <span class="token string">'^/([a-z]{3})/(.*)'</span> /web/<span class="token variable">$1</span>/<span class="token variable">$2</span> permanent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-5-3、if"><a href="#_5-5-3、if" class="header-anchor">#</a> 5.5.3、if</h4> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment"># 注意，if 和左括号( 有一个空格</span>
    <span class="token punctuation">..</span>.
<span class="token punctuation">}</span>
</code></pre></div><p>可以在server块、location块使用</p> <p>condition可以是：</p> <div class="language- extra-class"><pre class="language-text"><code>    =,!= : 判断变是否相等
    正则表达式: ~(区分大小写),~*(不区分大小写),!~(~取反),!~*(~*取反)
    -f,!-f: 文件时是否存在
    -d,!-d: 目录是否存在
    -e,!-e: 目录或文件是否在使用
    -x,!-x: 文件是否可执行
</code></pre></div><p>例子：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$http_user_agent</span> ~ Chrome<span class="token punctuation">)</span><span class="token punctuation">{</span>
  rewrite /<span class="token punctuation">(</span>.*<span class="token punctuation">)</span>/browser/<span class="token variable">$1</span> <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location / <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$uri</span> <span class="token operator">=</span> <span class="token string">&quot;/images/&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		rewrite <span class="token punctuation">(</span>.*<span class="token punctuation">)</span> /pics/ <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request_method</span> <span class="token operator">=</span> POST<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   		<span class="token builtin class-name">return</span> <span class="token number">405</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_6、负载均衡与限流"><a href="#_6、负载均衡与限流" class="header-anchor">#</a> 6、负载均衡与限流</h2> <h3 id="_6-1、负载均衡"><a href="#_6-1、负载均衡" class="header-anchor">#</a> 6.1、负载均衡</h3> <p>在头部使用<code>upstream</code>即可使用负载均衡，Nginx 默认提供的负载均衡策略：</p> <ul><li><p>1、轮询（默认）round_robin</p> <blockquote><p>每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器 down 掉，能自动剔除。</p></blockquote></li> <li><p>2、IP 哈希 ip_hash</p> <blockquote><p>每个请求按访问 ip 的 hash 结果分配，这样每个访客固定访问一个后端服务器，可以解决 session 共享的问题。</p> <p>当然，实际场景下，一般不考虑使用 ip_hash 解决 session 共享。</p></blockquote> <p>还有相似的url_hash，<strong>通过请求url进行hash，再通过hash值选择后端server</strong></p></li> <li><p>3、最少连接 least_conn</p> <blockquote><p>下一个请求将被分派到活动连接数量最少的服务器</p></blockquote></li> <li><p>4、权重 weight</p> <blockquote><p>weight的值越大分配到的访问概率越高，主要用于后端每台服务器性能不均衡的情况下，达到合理的资源利用率。</p></blockquote></li></ul> <p>还可以通过插件支持其他策略。</p> <ul><li>5、<strong>fair</strong>（第三方），按后端服务器的响应时间分配，响应时间短的优先分配，依赖第三方插件 nginx-upstream-fair，需要先安装；</li></ul> <p>例如：使用weight负载均衡策略分发请求到不同的服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	upstream mysite <span class="token punctuation">{</span> 
	<span class="token comment"># ip_hash # ip_hash 方式</span>
	<span class="token comment"># weight权重分配方式，表示 1:1</span>
        server <span class="token number">127.0</span>.0.1:8090 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 
        server <span class="token number">127.0</span>.0.1:8091 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  hellocoder.com <span class="token punctuation">;</span>

        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		
		location / <span class="token punctuation">{</span>
		 proxy_pass http://mysite<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>使用IP、URL hash策略：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    upstream mysite <span class="token punctuation">{</span> 
     <span class="token comment"># ip_hash 策略</span>
	<span class="token comment"># ip_hash;</span>
	<span class="token comment"># url_hash 策略</span>
	<span class="token builtin class-name">hash</span> <span class="token variable">$request_uri</span><span class="token punctuation">;</span>
     	server <span class="token number">127.0</span>.0.1:8090<span class="token punctuation">;</span>
        server <span class="token number">127.0</span>.0.1:8091<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>在 upstream 内可使用的指令：</p> <ul><li>server 定义上游服务器地址；</li> <li>zone 定义共享内存，用于跨 worker 子进程；</li> <li>keepalive 对上游服务启用长连接；</li> <li>keepalive_requests 一个长连接最多请求 HTTP 的个数；</li> <li>keepalive_timeout 空闲情形下，一个长连接的超时时长；</li> <li>hash 哈希负载均衡算法；</li> <li>ip_hash 依据 IP 进行哈希计算的负载均衡算法；</li> <li>least_conn 最少连接数负载均衡算法；</li> <li>least_time 最短响应时间负载均衡算法；</li> <li>random 随机负载均衡算法；</li></ul> <h3 id="_6-2、限流"><a href="#_6-2、限流" class="header-anchor">#</a> 6.2、限流</h3> <p><code>ngx_http_limit_req_module</code>  模块提供了漏桶算法(leaky bucket)，可以限制单个IP的请求处理频率。</p> <p>如：</p> <p><strong>正常限流：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>http <span class="token punctuation">{</span>
	limit_req_zone <span class="token number">192.168</span>.1.1 <span class="token assign-left variable">zone</span><span class="token operator">=</span>myLimit:10m <span class="token assign-left variable">rate</span><span class="token operator">=</span>5r/s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
	location / <span class="token punctuation">{</span>
		limit_req <span class="token assign-left variable">zone</span><span class="token operator">=</span>myLimit<span class="token punctuation">;</span>
		rewrite / http://www.hac.cn permanent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参数解释：</p> <div class="language- extra-class"><pre class="language-text"><code>key: 定义需要限流的对象。
zone: 定义共享内存区来存储访问信息。
rate: 用于设置最大访问速率。
</code></pre></div><p>表示基于客户端192.168.1.1进行限流，定义了一个大小为10M，名称为myLimit的内存区，用于存储IP地址访问信息。</p> <p><code>rate</code> 设置IP访问频率，<code>rate=5r/s</code>表示每秒只能处理每个IP地址的5个请求。Nginx限流是按照毫秒级为单位的，也就是说1秒处理5个请求会变成每200ms只处理一个请求。如果200ms内已经处理完1个请求，但是还是有有新的请求到达，这时候Nginx就会拒绝处理该请求。</p> <h2 id="_7、nginx代理"><a href="#_7、nginx代理" class="header-anchor">#</a> 7、Nginx代理</h2> <h3 id="_7-1、正向代理"><a href="#_7-1、正向代理" class="header-anchor">#</a> 7.1、正向代理</h3> <p>我上传了一个静态网站在某个服务器目录，假如我的服务器是<code>81.71.16.134</code>，</p> <p>那要如何通过我的域名 <a href="https://learnjava.baimuxym.cn" target="_blank" rel="noopener noreferrer">https://learnjava.baimuxym.cn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 访问它呢？</p> <p>步骤如下：</p> <ol><li><p>首先需要把域名解析到我的IP</p></li> <li><p>申请SSL证书，配置服务器</p></li> <li><p>正向代理，监听443端口（因为https的端口是443），转发；监听 80 端口，<code>http://</code> 强制 跳到 <code>https://</code>。</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>  server <span class="token punctuation">{</span>
       listen       <span class="token number">80</span><span class="token punctuation">;</span> <span class="token comment">#监听端口</span>
       server_name  learnjava.baimuxym.cn<span class="token punctuation">;</span> <span class="token comment">#请求域名</span>
       <span class="token builtin class-name">return</span>      <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span> <span class="token comment">#重定向至https访问。</span>
   <span class="token punctuation">}</span>
   
    server <span class="token punctuation">{</span>
    listen <span class="token number">443</span> ssl<span class="token punctuation">;</span> <span class="token comment"># 这里改的是</span>
    server_name learnjava.baimuxym.cn<span class="token punctuation">;</span> <span class="token comment"># 改为绑定证书的域名</span>

    ssl on<span class="token punctuation">;</span>
    ssl_certificate /usr/local/nginx/learnjava.baimuxym.cn/1_learnjava.baimuxym.cn_bundle.crt<span class="token punctuation">;</span> <span class="token comment"># 改为自己申请得到的 crt 文件的名称或者 pem文件的名称</span>
    ssl_certificate_key /usr/local/nginx/learnjava.baimuxym.cn/2_learnjava.baimuxym.cn.key<span class="token punctuation">;</span> <span class="token comment"># 改为自己申请得到的 key 文件的名称</span>
    ssl_session_timeout 5m<span class="token punctuation">;</span>
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span>
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>RC4:<span class="token operator">!</span>DHE<span class="token punctuation">;</span>
    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>

    location / <span class="token punctuation">{</span> <span class="token comment"># 匹配所有</span>
    root  /var/www/web/LearnJavaToFindAJob/docs<span class="token punctuation">;</span> <span class="token comment"># 你的静态网站项目路径，刚刚上传的目录</span>
    index index.html<span class="token punctuation">;</span>	 <span class="token comment"># 首页名称</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-2-、反向代理"><a href="#_7-2-、反向代理" class="header-anchor">#</a> 7.2 、反向代理</h3> <p>和正向代理差不多的配置，我这里列举一下 <code>location</code>的不同：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
	proxy_http_version <span class="token number">1.1</span><span class="token punctuation">;</span> <span class="token comment">#代理使用的http协议</span>
	proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span> <span class="token comment">#header添加请求host信息</span>
	proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span> <span class="token comment"># header增加请求来源IP信息</span>
	proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span> <span class="token comment"># 增加&gt;代理记录</span>
	proxy_pass http://127.0.0.1:8888<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只需要简单使用 <code>proxy_pass</code> 就可以反向代理，可用于跳转到Tomcat的服务地址、springbooot项目的服务地址。</p> <p>Nginx详细的实践可以参考：TODOLIST</p> <h2 id="_8、开启-gzip-压缩"><a href="#_8、开启-gzip-压缩" class="header-anchor">#</a> 8、开启 gzip 压缩</h2> <p>HTTP协议上的gzip编码是一种用来改进web应用程序性能的技术,web服务器和客户端(浏览器)必须共同支持gzip。</p> <p>目前主流的浏览器,Chrome,firefox,IE等都支持该协议。</p> <p>**客户端请求时：**支持的浏览器会加上 <code>Accept-Encoding: gzip</code> 这个 header，表示自己支持 gzip 的压缩方式，</p> <p>**服务器处理时：**Nginx 在拿到这个请求的时候，如果有相应配置，就会返回经过 gzip 压缩过的文件给浏览器，并在 response 相应的时候加上 <code>content-encoding: gzip</code> 来告诉浏览器自己采用的压缩方式</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210518165524708.png" alt=""></p> <p>Nginx开启gzip的配置如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
http <span class="token punctuation">{</span>
  <span class="token comment"># 开启gzip</span>
  <span class="token function">gzip</span> on<span class="token punctuation">;</span>

  <span class="token comment"># 启用gzip压缩的最小文件；小于设置值的文件将不会被压缩</span>
  <span class="token comment"># ,建议设置成大于1k,如果小于1k可能会越压越大</span>
  gzip_min_length 1k<span class="token punctuation">;</span>

  <span class="token comment"># 压缩比率,用来指定gzip压缩比(1~9)</span>
  <span class="token comment"># 1:压缩比最小,速度最快,9:压缩比最大,传输速度最快,但处理最慢,也比较的消耗CPU资源</span>
  gzip_comp_level <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token comment"># 进行压缩的文件类型。text/html 文件被系统强制启用</span>
  gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png<span class="token punctuation">;</span>

  <span class="token comment"># 是否在http header中添加Vary: Accept-Encoding，建议开启</span>
  gzip_vary on<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>开启gzip对网站的性能有很大的提升，比如说我的网站，这是<strong>没有开启gzip压缩</strong>前的大小，可以看到是<code>50.2kB</code>，time是<code>100ms</code></p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210518164206239.png" alt=""></p> <p>这是<strong>开启gzip压缩</strong>后的大小，可以看到是<code>11.5kB</code>，time是<code>88ms</code>： <img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210518164842720.png" alt=""></p> <p>比如说掘金的网站也是使用了gzip，可以通过 content-encoding 进行判断：</p> <p><img src="https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210518164046719.png" alt=""></p> <h2 id="_9、http、ip转发到https"><a href="#_9、http、ip转发到https" class="header-anchor">#</a> 9、HTTP、IP转发到HTTPS</h2> <p>我们购买了SSL证书后配置了HTTPS，用户在访问 <a href="http://rain.baimuxym.cn" target="_blank" rel="noopener noreferrer">http://rain.baimuxym.cn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者<a href="http://81.71.16.134/" target="_blank" rel="noopener noreferrer">http://81.71.16.134<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>访问的时候，我们可以让它强制跳转到 <a href="https://rain.baimuxym.cn" target="_blank" rel="noopener noreferrer">https://rain.baimuxym.cn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    server_name <span class="token number">81.71</span>.16.134<span class="token punctuation">;</span>
    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.baimuxym.cn<span class="token variable">$request_uri</span><span class="token punctuation">;</span> <span class="token comment">#ip重定向跳至https访问。</span>
<span class="token punctuation">}</span>


server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span> <span class="token comment">#监听端口</span>
    server_name  *.baimuxym.cn <span class="token comment">#请求域名</span>
    location  ^~ / <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span>  <span class="token number">301</span> https://<span class="token variable">$server_name</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span> <span class="token comment">#重定向至https访问。</span>
    
    <span class="token comment"># 或者</span>
    <span class="token comment"># 全局非 https 协议时重定向</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$scheme</span> <span class="token operator">!=</span> <span class="token string">'https'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token number">301</span> https://<span class="token variable">$server_name</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># 或者直接全部重定向，不用判断HTTP还是HTTPS</span>
    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://<span class="token variable">$server_name</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_10、nginx的第三方模块"><a href="#_10、nginx的第三方模块" class="header-anchor">#</a> 10、Nginx的第三方模块</h2> <p>Nginx提供了很多第三方的模块，相对于一个插件，这里可以查询：https://www.nginx.com/nginx-wiki/build/dirhtml/modules/</p> <h3 id="_1、ngx-http-limit-req-module-限流模块"><a href="#_1、ngx-http-limit-req-module-限流模块" class="header-anchor">#</a> 1、ngx_http_limit_req_module 限流模块</h3> <h4 id="_1、控制速率"><a href="#_1、控制速率" class="header-anchor">#</a> 1、控制速率</h4> <p><code>ngx_http_limit_req_module</code>  模块提供了漏桶算法(leaky bucket)，可以限制单个IP的请求处理频率。</p> <p>如：</p> <p><strong>1.1 正常限流：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>http <span class="token punctuation">{</span>
	limit_req_zone <span class="token number">192.168</span>.1.1 <span class="token assign-left variable">zone</span><span class="token operator">=</span>myLimit:10m <span class="token assign-left variable">rate</span><span class="token operator">=</span>5r/s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
	location / <span class="token punctuation">{</span>
		limit_req <span class="token assign-left variable">zone</span><span class="token operator">=</span>myLimit<span class="token punctuation">;</span>
		rewrite / http://www.hac.cn permanent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参数解释：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>key: 定义需要限流的对象。
zone: 定义共享内存区来存储访问信息。
rate: 用于设置最大访问速率。
</code></pre></div><p>表示基于客户端192.168.1.1进行限流，定义了一个大小为10M，名称为myLimit的内存区，用于存储IP地址访问信息。rate设置IP访问频率，rate=5r/s表示每秒只能处理每个IP地址的5个请求。Nginx限流是按照毫秒级为单位的，也就是说1秒处理5个请求会变成每200ms只处理一个请求。如果200ms内已经处理完1个请求，但是还是有有新的请求到达，这时候Nginx就会拒绝处理该请求。</p> <p><strong>1.2 突发流量限制访问频率</strong></p> <p>上面rate设置了 5r/s，如果有时候流量突然变大，超出的请求就被拒绝返回503了，突发的流量影响业务就不好了。</p> <p>这时候可以加上<strong>burst</strong> 参数，一般再结合 <strong>nodelay</strong> 一起使用。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
	location / <span class="token punctuation">{</span>
		limit_req <span class="token assign-left variable">zone</span><span class="token operator">=</span>myLimit <span class="token assign-left variable">burst</span><span class="token operator">=</span><span class="token number">20</span> nodelay<span class="token punctuation">;</span>
		rewrite / http://www.hac.cn permanent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>burst=20 nodelay</code> 表示这20个请求立马处理，不能延迟，相当于特事特办。不过，即使这20个突发请求立马处理结束，后续来了请求也不会立马处理。burst=20 相当于缓存队列中占了20个坑，即使请求被处理了，这20个位置这只能按 100ms一个来释放。</p> <h4 id="_2、控制并发连接数"><a href="#_2、控制并发连接数" class="header-anchor">#</a> 2、控制并发连接数</h4> <p><code>ngx_http_limit_conn_module</code> 提供了限制连接数功能。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>limit_conn_zone <span class="token variable">$binary_remote_addr</span> <span class="token assign-left variable">zone</span><span class="token operator">=</span>perip:10m<span class="token punctuation">;</span>
limit_conn_zone <span class="token variable">$server_name</span> <span class="token assign-left variable">zone</span><span class="token operator">=</span>perserver:10m<span class="token punctuation">;</span>

server <span class="token punctuation">{</span>
    <span class="token punctuation">..</span>.
    limit_conn perip <span class="token number">10</span><span class="token punctuation">;</span>
    limit_conn perserver <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>limit_conn perip 10</code> 作用的key 是 <code>$binary_remote_addr</code>，表示限制单个IP同时最多能持有10个连接。</p> <p><code>limit_conn perserver 100</code> 作用的key是 <code>$server_name</code>，表示虚拟主机(server) 同时能处理并发连接的总数。</p> <blockquote><p>注：<strong>limit_conn perserver 100</strong> 作用的key是 <strong>$server_name</strong>，表示虚拟主机(server) 同时能处理并发连接的总数。</p></blockquote> <h4 id="拓展"><a href="#拓展" class="header-anchor">#</a> 拓展：</h4> <p>如果不想做限流，还可以设置白名单：</p> <p>利用 Nginx <code>ngx_http_geo_module</code> 和 <code>ngx_http_map_module</code> 两个工具模块提供的功能。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">##定义白名单ip列表变量</span>
geo <span class="token variable">$limit</span> <span class="token punctuation">{</span>
    default <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token number">10.0</span>.0.0/8 <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token number">192.168</span>.0.0/10 <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token number">81.56</span>.0.35 <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

map <span class="token variable">$limit</span> <span class="token variable">$limit_key</span> <span class="token punctuation">{</span>
    <span class="token number">0</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token number">1</span> <span class="token variable">$binary_remote_addr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment"># 正常限流设置</span>
limit_req_zone <span class="token variable">$limit_key</span> <span class="token assign-left variable">zone</span><span class="token operator">=</span>myRateLimit:10m <span class="token assign-left variable">rate</span><span class="token operator">=</span>10r/s<span class="token punctuation">;</span>
</code></pre></div><p><strong>geo</strong> 对于白名单 将返回0，不限流；其他IP将返回1，进行限流。</p> <p>具体参考：http://nginx.org/en/docs/http/ngx_http_geo_module.html</p> <p>除此之外：</p> <p><code>ngx_http_core_module</code> 还提供了限制数据传输速度的能力(即常说的下载速度)</p> <div class="language-shell extra-class"><pre class="language-shell"><code>location /flv/ <span class="token punctuation">{</span>
    flv<span class="token punctuation">;</span>
    limit_rate_after 500m<span class="token punctuation">;</span>
    limit_rate       50k<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>针对每个请求，表示客户端下载前500m的大小时不限速，下载超过了500m后就限速50k/s。</p> <h3 id="_2、ngx-http-ssl-module模块"><a href="#_2、ngx-http-ssl-module模块" class="header-anchor">#</a> 2、ngx_http_ssl_module模块</h3> <p><code>ngx_http_ssl_module</code>模块提供对HTTPS必要的支持。</p> <p>常用配置：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>、ssl on <span class="token operator">|</span> off<span class="token punctuation">;</span> 
    为指定虚拟机启用HTTPS protocol，建议用listen指令代替
    可用位置：http, server

<span class="token number">2</span>、ssl_certificate <span class="token function">file</span><span class="token punctuation">;</span> 
    当前虚拟主机使用PEM格式的证书文件
    可用位置：http, server

<span class="token number">3</span>、ssl_certificate_key <span class="token function">file</span><span class="token punctuation">;</span> 
    当前虚拟主机上与其证书匹配的私钥文件
    可用位置：http, server

<span class="token number">4</span>、ssl_protocols <span class="token punctuation">[</span>SSLv2<span class="token punctuation">]</span> <span class="token punctuation">[</span>SSLv3<span class="token punctuation">]</span> <span class="token punctuation">[</span>TLSv1<span class="token punctuation">]</span> <span class="token punctuation">[</span>TLSv1.1<span class="token punctuation">]</span> <span class="token punctuation">[</span>TLSv1.2<span class="token punctuation">]</span><span class="token punctuation">;</span> 
    支持ssl协议版本，默认为后三个
    可用位置：http, server

<span class="token number">5</span>、ssl_session_cache off <span class="token operator">|</span> none <span class="token operator">|</span> <span class="token punctuation">[</span>builtin<span class="token punctuation">[</span>:size<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>shared:name:size<span class="token punctuation">]</span><span class="token punctuation">;</span> 
    builtin<span class="token punctuation">[</span>:size<span class="token punctuation">]</span>：使用OpenSSL内建缓存，为每worker进程私有
    <span class="token punctuation">[</span>shared:name:size<span class="token punctuation">]</span>：在各worker之间使用一个共享的缓存
    可用位置：http, server

<span class="token number">6</span>、ssl_session_timeout <span class="token function">time</span><span class="token punctuation">;</span> 
    客户端连接可以复用sslsession cache中缓存的ssl参数的有效时长，默认5m
    可用位置：http, server
</code></pre></div><h2 id="_11、总结"><a href="#_11、总结" class="header-anchor">#</a> 11、总结</h2> <p>以上就是一些关于Nginx的简单用法，网上的资料也很多，有兴趣的可以自己学习一下，比如说 图片服务器、文件下载服务器、动静分离、跨域解决等等的实现。</p> <p>Nginx更详细的说明，建议大家去<a href="http://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx的官方网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看。</p> <hr> <p>参考：</p> <ul><li>https://mp.weixin.qq.com/s/pjhZi5cmpewwHZNn-aQJiA</li> <li>https://blog.csdn.net/yexudengzhidao/article/details/100104134</li> <li>https://www.cnblogs.com/jpfss/p/10232980.html</li></ul></div></div> <div class="read-more-wrap" style="display:none;position:absolute;bottom:0px;z-index:9999;width:100%;margin-top:-100px;font-family:PingFangSC-Regular, sans-serif;"><div id="read-more-mask" style="position: relative; height: 300px; background:-webkit-gradient(linear, 0 0%, 0 50%, from(rgba(255, 255, 255, 0)), to(rgb(255 255 255 / 82%)));"></div> <a id="read-more-btn" target="_self" style="position: absolute; left: 50%; top: 50%; bottom: 30px; transform: translate(-50%, -50%); width: 160px; height: 36px; line-height: 36px; font-size: 15px; text-align: center; border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109); background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;"><span id="read-more-text">阅读全文</span> <br style="display:none;"> <span id="read-more-text_remainder"></span></a> <div id="btw-modal-wrap" style="display: none;"><div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0);"></div> <div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;"><span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 34px; font-size: 34px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">×</span> <p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px;">
                  （为防止恶意爬虫）
                  <br>
                  扫码或搜索：<span style="color: #E9405A; font-weight: bold;">HelloCoder</span> <br>发送：<span id="fustack-token" class="token" style="color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;">290992</span> <br>即可<span style="color: #e9415a; font-weight: bold;">永久解锁</span>本站全部文章</p> <img src="/img/site/HelloCoder.png" style="width: 180px; margin-top: 10px; margin-bottom: 30px; border: 8px solid rgb(230, 230, 230);"> <div class="input-password"><input id="input_password" autocomplete="off" placeholder="请输入密码"> <span><a id="check_password" target="_self" class="btn-password"> 解锁 </a></span></div></div></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Nginx" title="标签">#Nginx</a><a href="/tags/?tag=%E5%85%A5%E9%97%A8" title="标签">#入门</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023-07-03 13:53:21</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%A1%86%E6%9E%B6/"><div>
            分布式任务调度框架
            <!----></div></a> <span class="date">07-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/HTTP%E5%92%8CTCP%E7%9A%84keep-alive%E5%8C%BA%E5%88%AB/"><div>
            HTTP和TCP的keep-alive区别
            <!----></div></a> <span class="date">02-16</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/Spring%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"><div>
            Spring源码解读
            <!----></div></a> <span class="date">02-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:huangyongwen0306@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://www.zhihu.com/people/dai-ma-coder" title="知乎" target="_blank" class="iconfont icon-zhihu"></a><a href="/img/site/HelloCoder.png" title="微信公众号" target="_blank" class="iconfont icon-weixin"></a></div> 
    Theme by
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
      | Copyright © 2020-2023
      <span>程序员阿雨</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4ca91999.js" defer></script><script src="/assets/js/3.20e33b3c.js" defer></script><script src="/assets/js/4.2d053232.js" defer></script><script src="/assets/js/254.2bfc66b0.js" defer></script>
  </body>
</html>
