(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{703:function(a,t,n){"use strict";n.r(t);var s=n(7),e=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("上个章节"),t("a",{attrs:{href:"https://blog.csdn.net/yudianxiaoxiao/article/details/109662030",target:"_blank",rel:"noopener noreferrer"}},[a._v("【教你搭建服务器系列】（3）部署静态网站到Tomcat服务器"),t("OutboundLink")],1),a._v("，搭建Tomcat服务器部署静态网站实在是太麻烦了， 那么这一章节，我来教大家把静态简历网站部署到更"),t("strong",[a._v("轻量级的Nginx服务器")]),a._v("。")]),a._v(" "),t("p",[a._v("之前我们已经学习了搭建Linux服务器的环境，这里就不再讲述搭建Nginx的环境了。有兴趣的可以移步"),t("a",{attrs:{href:"https://blog.csdn.net/yudianxiaoxiao/article/details/109589101",target:"_blank",rel:"noopener noreferrer"}},[a._v("【教你搭建服务器系列】（2）搭建服务器环境，安装JDK、MySQL、Redis、Tomcat、Nginx"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"_1、下载nginx证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载nginx证书"}},[a._v("#")]),a._v(" 1、下载Nginx证书")]),a._v(" "),t("p",[a._v("需要先去腾讯云的后台把SSL证书下载下来，然后上传到你的服务器的某个目录（上一篇文章也就说过了，这里不啰嗦了：）")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/clipboard-1602490530864.png",alt:""}})]),a._v(" "),t("p",[a._v("我这里上传的位置是："),t("code",[a._v("/usr/local/nginx/learnjava.baimuxym.cn/")])]),a._v(" "),t("h2",{attrs:{id:"_2、上传你的项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、上传你的项目"}},[a._v("#")]),a._v(" 2、上传你的项目")]),a._v(" "),t("p",[a._v("必须是一个静态网站，你可以部署你的简历、hexo 到这里。")]),a._v(" "),t("p",[a._v("我这里上传一个docsify 的文档到：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210511165711963.png",alt:""}})]),a._v(" "),t("h2",{attrs:{id:"_3、配置nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、配置nginx"}},[a._v("#")]),a._v(" 3、配置Nginx")]),a._v(" "),t("p",[a._v("找到你的Nginx配置文件 "),t("code",[a._v("nginx.conf")])]),a._v(" "),t("p",[a._v("如果你忘记了，或者实在不知道是在哪里了，可以执行查找命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" / -name nginx.conf\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210130174719939.png",alt:""}})]),a._v(" "),t("p",[a._v("这里有两个文件。")]),a._v(" "),t("blockquote",[t("p",[a._v("我这里在编译安装的时候移动过位置，如果在"),t("a",{attrs:{href:"https://blog.csdn.net/yudianxiaoxiao/article/details/109589101#t3",target:"_blank",rel:"noopener noreferrer"}},[a._v("【教你搭建服务器系列】（2）搭建服务器环境，安装JDK、MySQL、Redis、Tomcat、Nginx"),t("OutboundLink")],1),a._v("你是按照我的命令安装，那么就是第一个配置文件了。")])]),a._v(" "),t("p",[a._v("打开"),t("code",[a._v("nginx.conf")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-8-8-centos ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd /usr/local/nginx/conf/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-8-8-centos conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vi nginx.conf")]),a._v("\n")])])]),t("p",[a._v("如果你不熟悉使用vim，可以把"),t("code",[a._v("nginx.conf")]),a._v(" 下载到本地，修改完成再上传上去。")]),a._v(" "),t("p",[a._v("如果你对Nginx不熟悉，可以参考一下：")]),a._v(" "),t("p",[a._v("修改"),t("code",[a._v("nginx.conf")]),a._v("  为：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("  server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n       listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#监听端口")]),a._v("\n       server_name  learnjava.baimuxym.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#请求域名")]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("return")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("301")]),a._v(" https://"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$request_uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重定向至https访问。")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n   \n    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    listen "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这里改的是")]),a._v("\n    server_name learnjava.baimuxym.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 改为绑定证书的域名")]),a._v("\n\n    ssl on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    ssl_certificate /usr/local/nginx/learnjava.baimuxym.cn/1_learnjava.baimuxym.cn_bundle.crt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 改为自己申请得到的 crt 文件的名称或者 pem文件的名称")]),a._v("\n    ssl_certificate_key /usr/local/nginx/learnjava.baimuxym.cn/2_learnjava.baimuxym.cn.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 改为自己申请得到的 key 文件的名称")]),a._v("\n    ssl_session_timeout 5m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("aNULL:"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("MD5:"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("RC4:"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("DHE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    ssl_prefer_server_ciphers on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 匹配所有")]),a._v("\n    root  /var/www/web/LearnJavaToFindAJob/docs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 你的静态网站项目路径，刚刚上传的目录")]),a._v("\n    index index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\t "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 首页名称")]),a._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("申请的SSL证书域名一定要和自己这里配置的 server_name、ssl_certificate、ssl_certificate_key 一致")])]),a._v(" "),t("p",[a._v("第一个server的目的就是 访问 "),t("a",{attrs:{href:"http://learnjava.baimuxym.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://learnjava.baimuxym.cn"),t("OutboundLink")],1),a._v("  就会默认跳转到  "),t("a",{attrs:{href:"https://learnjava.baimuxym.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://learnjava.baimuxym.cn"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"_4、启动nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、启动nginx"}},[a._v("#")]),a._v(" 4、启动Nginx")]),a._v(" "),t("p",[a._v("常见的Nginx命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("./nginx  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动")]),a._v("\n./nginx -s stop "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止")]),a._v("\n./nginx -s reload "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重启，Nginx启动了才能reload，否则报错")]),a._v("\n")])])]),t("p",[a._v("进入Nginx的sbin目录启动：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-8-8-centos ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd /usr/local/nginx/sbin/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-8-8-centos sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./nginx")]),a._v("\n")])])]),t("p",[a._v("如果没有报错，就说明启动成功了，如果提示不支持SSL，那么你还需要安装一下OpenSSL：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y openssl openssl-devel\n")])])]),t("p",[a._v("启动后，打开浏览器访问 "),t("a",{attrs:{href:"https://learnjava.baimuxym.cn/#/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://learnjava.baimuxym.cn"),t("OutboundLink")],1),a._v("  （下图所示）")]),a._v(" "),t("img",{staticStyle:{zoom:"65%"},attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img-20210401/image-20210511180707445.png"}}),a._v(" "),t("hr"),a._v(" "),t("p",[a._v("大家可以点击  "),t("a",{attrs:{href:"https://learnjava.baimuxym.cn/#/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://learnjava.baimuxym.cn"),t("OutboundLink")],1),a._v("  体验一下，这是一个在线文档，我利用 docsify + Nginx 搭建的，同时配合了typora+GitHub图床+Git 同步，就能随时都可以查看自己的笔记了。")]),a._v(" "),t("p",[a._v("下一篇文章教大家如何搭建docsify 。")]),a._v(" "),t("p",[t("strong",[a._v("拓展")])]),a._v(" "),t("p",[a._v("对Nginx不熟悉的筒子们，可以看看我的另外一篇教程："),t("a",{attrs:{href:"https://purejava.baimuxym.cn/#/articles%5CNginx%5CNginx%E5%85%A5%E9%97%A8",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nginx入门与实践"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);