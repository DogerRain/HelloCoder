(window.webpackJsonp=window.webpackJsonp||[]).push([[260],{665:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("æ•°æ®è·å–çš„æµç¨‹ï¼Œä¸€èˆ¬æ˜¯å‰ç«¯è¯·æ±‚ï¼Œåå°å…ˆä»ç¼“å­˜ä¸­å–æ•°æ®ï¼Œç¼“å­˜å–ä¸åˆ°åˆ™å»æ•°æ®åº“ä¸­å–ï¼Œæ•°æ®åº“å–åˆ°äº†åˆ™è¿”å›ç»™å‰ç«¯ï¼Œç„¶åæ›´æ–°ç¼“å­˜ï¼Œå¦‚æœæ•°æ®åº“å–ä¸åˆ°åˆ™è¿”å›ç©ºæ•°æ®ç»™å‰ç«¯")])]),t._v(" "),s("p",[t._v("æµç¨‹å›¾ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20200608113313177.png",alt:" "}})]),t._v(" "),s("p",[t._v("å‡å¦‚ç¼“å­˜çš„æ•°æ®æ²¡æœ‰ï¼Œåå°åˆ™ä¼šä¸€ç›´è¯·æ±‚æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“é€ æˆå‹åŠ›ï¼Œå¦‚æœæ˜¯è¯·æ±‚é‡å¤§æˆ–è€…æ¶æ„è¯·æ±‚åˆ™ä¼šå¯¼è‡´æ•°æ®åº“å´©æºƒï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸ºç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_1ã€ç¼“å­˜ç©¿é€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ç¼“å­˜ç©¿é€"}},[t._v("#")]),t._v(" 1ã€ç¼“å­˜ç©¿é€")]),t._v(" "),s("p",[t._v("æè¿°ï¼šç¼“å­˜ç©¿é€æ˜¯æŒ‡"),s("strong",[t._v("ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®")]),t._v("ï¼Œè€Œç”¨æˆ·ä¸æ–­å‘èµ·è¯·æ±‚ï¼Œå¦‚å‘èµ·ä¸ºidä¸ºâ€œ-1â€çš„æ•°æ®æˆ–idä¸ºç‰¹åˆ«å¤§ï¼ˆä¸å­˜åœ¨çš„æ•°æ®ï¼‰ã€‚è¿™æ—¶çš„ç”¨æˆ·å¾ˆå¯èƒ½æ˜¯æ”»å‡»è€…ï¼Œæ”»å‡»ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20201028233114175.png",alt:"ç¼“å­˜ç©¿é€"}})]),t._v(" "),s("p",[t._v("è§£å†³ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("æ¥å£å±‚å¢åŠ æ ¡éªŒï¼Œå¦‚ç”¨æˆ·é‰´æƒæ ¡éªŒï¼ŒidåšåŸºç¡€æ ¡éªŒï¼Œæ¯”å¦‚ id<=0çš„ç›´æ¥æ‹¦æˆªï¼›")]),t._v(" "),s("li",[t._v("ä»ç¼“å­˜å–ä¸åˆ°çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰å–åˆ°ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥å°†key-valueå¯¹å†™ä¸ºkey-nullï¼Œç›´æ¥è¿”å›ç©ºå€¼ã€‚ç¼“å­˜æœ‰æ•ˆæ—¶é—´å¯ä»¥è®¾ç½®çŸ­ç‚¹ï¼Œå¦‚30ç§’ï¼ˆè®¾ç½®å¤ªé•¿ä¼šå¯¼è‡´æ­£å¸¸æƒ…å†µä¹Ÿæ²¡æ³•ä½¿ç”¨ï¼‰ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ”»å‡»ç”¨æˆ·åå¤ç”¨åŒä¸€ä¸ªidæš´åŠ›æ”»å‡»ã€‚")]),t._v(" "),s("li",[t._v("åˆ©ç”¨äº’æ–¥é”ï¼Œç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œå…ˆå»è·å¾—é”ï¼Œå¾—åˆ°é”äº†ï¼Œå†å»è¯·æ±‚æ•°æ®åº“ã€‚æ²¡å¾—åˆ°é”ï¼Œåˆ™ä¼‘çœ ä¸€æ®µæ—¶é—´é‡è¯•ã€‚")]),t._v(" "),s("li",[t._v("å¼‚æ­¥æ›´æ–°ã€‚ç›´æ¥è¿”å›ä¸€ä¸ªç©ºå€¼ï¼Œç„¶åå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“è¯»æ•°æ®ï¼Œæ›´æ–°ç¼“å­˜ï¼Œæ¯”å¦‚é¡¹ç›®å¯åŠ¨å‰å…ˆåŠ è½½ç¼“å­˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æœ€å¸¸è§")]),t._v("çš„åˆ™æ˜¯é‡‡ç”¨"),s("strong",[t._v("å¸ƒéš†è¿‡æ»¤å™¨")]),t._v("ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢« è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_2ã€ç¼“å­˜å‡»ç©¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€ç¼“å­˜å‡»ç©¿"}},[t._v("#")]),t._v(" 2ã€ç¼“å­˜å‡»ç©¿")]),t._v(" "),s("p",[t._v("æè¿°ï¼š ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡"),s("strong",[t._v("ç¼“å­˜ä¸­æ²¡æœ‰ä½†æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®")]),t._v("ï¼Œå½“ä¸€ä¸ªkeyéå¸¸çƒ­ç‚¹ï¼ˆç±»ä¼¼äºçˆ†æ¬¾ï¼‰ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼›å½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20201028233133015.png",alt:"ç¼“å­˜å‡»ç©¿"}})]),t._v(" "),s("p",[t._v("è§£å†³ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åŠ äº’æ–¥é”ã€‚")]),t._v(" "),s("p",[t._v("å¦‚å›¾ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/20180919143214879.png",alt:" "}})])])]),t._v(" "),s("p",[t._v("å¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç¬¬ä¸€ä¸ªè¿›å…¥çš„çº¿ç¨‹å…ˆå»æŸ¥è¯¢æ•°æ®åº“ï¼Œå¹¶åŠ ä¸Šé”ï¼Œå…¶ä»–çº¿ç¨‹åˆ™ç­‰å¾…ï¼Œè¿™æ ·å°±èƒ½é˜²æ­¢å»æ•°æ®åº“æŸ¥é‡å¤æ•°æ®ã€é‡å¤æ›´æ–°ç¼“å­˜äº†ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_3ã€ç¼“å­˜é›ªå´©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€ç¼“å­˜é›ªå´©"}},[t._v("#")]),t._v(" 3ã€ç¼“å­˜é›ªå´©")]),t._v(" "),s("p",[t._v("ç¼“å­˜é›ªå´©æ˜¯æŒ‡"),s("strong",[t._v("ç¼“å­˜ä¸­æ•°æ®å¤§æ‰¹é‡åˆ°è¿‡æœŸæ—¶é—´")]),t._v("ï¼Œå¤§æ‰¹é‡æ•°æ®åŒä¸€æ—¶é—´è¿‡æœŸï¼Œå¯¼è‡´è¯·æ±‚é‡å…¨éƒ¨è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œé€ æˆæ•°æ®åº“å®•æœºã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20201028233209257.png",alt:"ç¼“å­˜é›ªå´©"}})]),t._v(" "),s("p",[t._v("è§£å†³ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ç»™ç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œé¿å…å¤§é‡ç¼“å­˜é›†ä½“å¤±æ•ˆã€‚")]),t._v(" "),s("li",[t._v("åŒç¼“å­˜ï¼šç¼“å­˜Aå’ŒBï¼Œæ¯”å¦‚Açš„å¤±æ•ˆæ—¶é—´æ˜¯20åˆ†é’Ÿï¼ŒBä¸å¤±æ•ˆã€‚æ¯”å¦‚ä»Aä¸­æ²¡è¯»åˆ°ï¼Œå°±å»Bä¸­è¯»ï¼Œç„¶åå¼‚æ­¥èµ·ä¸€ä¸ªçº¿ç¨‹åŒæ­¥åˆ°Aã€‚")])]),t._v(" "),s("p",[t._v("å…³äºäº’æ–¥é”ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Redis")])])]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯ä½¿ç”¨Redisï¼Œå¯ä»¥ä½¿ç”¨Redisçš„"),s("code",[t._v("SETNX")]),t._v("ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸å­˜åœ¨çš„æ—¶å€™æ‰è®¾ç½®ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥å®ç°é”çš„æ•ˆæœã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»£è¡¨ç¼“å­˜å€¼è¿‡æœŸ")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è®¾ç½®3minçš„è¶…æ—¶ï¼Œé˜²æ­¢delæ“ä½œå¤±è´¥çš„æ—¶å€™ï¼Œä¸‹æ¬¡ç¼“å­˜è¿‡æœŸä¸€ç›´ä¸èƒ½load db")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setnx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key_mutex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»£è¡¨è®¾ç½®æˆåŠŸ")]),t._v("\n               value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                      redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expire_secs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                      redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("del")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key_mutex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿™ä¸ªæ—¶å€™ä»£è¡¨åŒæ—¶å€™çš„å…¶ä»–çº¿ç¨‹å·²ç»load dbå¹¶å›è®¾åˆ°ç¼“å­˜äº†ï¼Œè¿™æ—¶å€™é‡è¯•è·å–ç¼“å­˜å€¼å³å¯")]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é‡è¯•")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      \n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("memcache")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("memcache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3 min timeout to avoid mutex holder crash  ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("memcache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key_mutex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        memcache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        memcache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key_mutex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("retry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("h2",{attrs:{id:"_4ã€ç¼“å­˜é¢„çƒ­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€ç¼“å­˜é¢„çƒ­"}},[t._v("#")]),t._v(" 4ã€ç¼“å­˜é¢„çƒ­")]),t._v(" "),s("p",[t._v("ç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿä¸Šçº¿åï¼Œåè€…ç³»ç»Ÿåœ¨é‡å¯çš„æ—¶å€™ï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°Redisã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ï¼Œç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("è§£å†³ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸Šçº¿æ—¶åŠ ä¸ªæ¥å£ï¼Œæ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ï¼Œæˆ–è€…å®šæ—¶åˆ·æ–°ç¼“å­˜ã€‚")]),t._v(" "),s("li",[t._v("æ•°æ®é‡ä¸å¤§ï¼Œå¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿›è¡ŒåŠ è½½ã€‚")])]),t._v(" "),s("p",[t._v("â€‹")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("https://www.iteye.com/blog/carlosfu-2269687")])]),t._v(" "),s("li",[s("p",[t._v("https://mp.weixin.qq.com/s/LOCLXG_mzBVQeFrtM8srmA")])])]),t._v(" "),s("p",[s("strong",[t._v("æ±‚ç‚¹èµğŸ‘")]),t._v(" "),s("strong",[t._v("æ±‚å…³æ³¨â¤ï¸")]),t._v(" "),s("strong",[t._v("æ±‚åˆ†äº«ğŸ’¬")])])])}),[],!1,null,null,null);s.default=e.exports}}]);