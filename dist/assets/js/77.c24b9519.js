(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{482:function(_,t,v){"use strict";v.r(t);var l=v(7),s=Object(l.a)({},(function(){var _=this,t=_._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1、为什么is-null-和-is-not-null-会导致索引失效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、为什么is-null-和-is-not-null-会导致索引失效"}},[_._v("#")]),_._v(" 1、为什么is null 和 is not null 会导致索引失效？")]),_._v(" "),t("p",[_._v("主键索引无法存储null值，所以where的判断条件如果对字段进行了null值判断，将导致数据库放弃索引而进行全表查询。")]),_._v(" "),t("p",[_._v("但是普通索引，需要看数据库版本，数据量等，普通索引含有null的行也会走索引；数据库是否使用索引，还要看优化器如何做选择。")]),_._v(" "),t("blockquote",[t("p",[_._v("这里就说到 is null 和 is not null 走了索引：https://www.cnblogs.com/fanBlog/p/11938287.html")])]),_._v(" "),t("p",[t("strong",[_._v("为什么主键索引列无法存储Null值？")])]),_._v(" "),t("p",[_._v("因为主键索引是有序的。NULL值进入索引时，无法确定其应该放在哪里。（将索引列值进行建树，其中必然涉及到诸多的比较操作，null 值是不确定值无法比较，无法确定null出现在索引树的叶子节点位置。）")]),_._v(" "),t("h2",{attrs:{id:"_2、前导模糊查询不能利用索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、前导模糊查询不能利用索引"}},[_._v("#")]),_._v(" 2、前导模糊查询不能利用索引")]),_._v(" "),t("p",[_._v("比如说 "),t("code",[_._v("like '%XX'或者like '%XX%'")]),_._v("，")]),_._v(" "),t("p",[_._v("由于"),t("strong",[_._v("前面是模糊")]),_._v("的，所以不能利用索引的顺序，必须一个个去找，看是否满足条件。这样会导致全索引扫描或者全表扫描。如果是这样的条件"),t("code",[_._v("where code like 'A % '")]),_._v("，就可以查找CODE中A开头的CODE的位置，当碰到B开头的数据时，就可以停止查找了，因为后面的数据一定不满足要求。这样就可以利用索引了。")]),_._v(" "),t("h2",{attrs:{id:"_3、or-失效原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、or-失效原因"}},[_._v("#")]),_._v(" 3、or 失效原因")]),_._v(" "),t("p",[_._v("or 不走索引的原因，可能是"),t("strong",[_._v("数据量太少，制定执行计划时发现全表更快，故MySQL没有走索引")]),_._v("。")]),_._v(" "),t("p",[_._v("如果数据量大，可以看到MySQL语句的 or 字段还是可以走索引的。")]),_._v(" "),t("p",[_._v("通常情况下，用"),t("code",[_._v("UNION")]),_._v("替换"),t("code",[_._v("WHERE")]),_._v("子句中的"),t("code",[_._v("OR")]),_._v("将会起到较好的效果，对索引列使用OR将造成全表扫描。")]),_._v(" "),t("h2",{attrs:{id:"_4、索引列使用函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、索引列使用函数"}},[_._v("#")]),_._v(" 4、索引列使用函数")]),_._v(" "),t("p",[_._v("假如有 "),t("code",[_._v("where month(t_modified)=7;")]),_._v("，t_modified 是一个datetime 字段")]),_._v(" "),t("p",[_._v("B+ 树中，它原来是按照 "),t("code",[_._v("2021-08-23 15:06:24")]),_._v("这种格式有序排列的，它是没办法处理这个 7 的，于是就放弃了树搜索功能。")]),_._v(" "),t("p",[_._v("类似的，还有 "),t("strong",[_._v("类型的隐式转换")]),_._v("、"),t("strong",[_._v("隐式字符编码转换")]),_._v(" 也是这个道理。")])])}),[],!1,null,null,null);t.default=s.exports}}]);