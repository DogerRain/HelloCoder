(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{697:function(t,a,v){"use strict";v.r(a);var _=v(7),e=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-操作系统中线程的5种状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-操作系统中线程的5种状态"}},[t._v("#")]),t._v(" 1.操作系统中线程的5种状态")]),t._v(" "),a("p",[a("strong",[t._v("在操作系统中")]),t._v("，线程的生命周期可以分为5种状态：")]),t._v(" "),a("p",[t._v("①"),a("strong",[t._v("new")]),t._v(" 关键字创建了Thread类（或其子类）的对象，或者Runnable。")]),t._v(" "),a("p",[t._v("②"),a("strong",[t._v("Runnable")]),t._v(" 调用了start()方法，这时的线程就等待时间片轮转到自己这，以便获得CPU；第二种情况是线程在处于RUNNING状态时并没有运行完自己的run方法，时间片用完之后回到RUNNABLE状态；还有种情况就是处于BLOCKED状态的线程结束了当前的BLOCKED状态之后重新回到RUNNABLE状态。")]),t._v(" "),a("p",[t._v("③"),a("strong",[t._v("Running")]),t._v("：这时的线程指的是获得CPU的RUNNABLE线程，RUNNING状态是所有线程都希望获得的状态。")]),t._v(" "),a("p",[t._v("④"),a("strong",[t._v("Dead")]),t._v("：处于RUNNING状态的线程，在执行完run方法之后，就变成了DEAD状态了。")]),t._v(" "),a("p",[t._v("⑤"),a("strong",[t._v("Blocked")]),t._v("：这种状态指的是处于RUNNING状态的线程，出于某种原因，比如调用了sleep方法、等待返回（调用wait方法）。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20200611004316963-1594691307317.png",alt:"图片源于网上，侵删"}})]),t._v(" "),a("h2",{attrs:{id:"_2-java中线程的6种状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-java中线程的6种状态"}},[t._v("#")]),t._v(" 2. Java中线程的6种状态")]),t._v(" "),a("p",[t._v("在《Java并发编程》、《Java核心技术卷一》这两本书说到："),a("strong",[t._v("在Java中，线程是分6种状态的")]),t._v("。")]),t._v(" "),a("p",[t._v("Thread类的枚举也印证了这点：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20200611004413289.png",alt:"image-20200611004413289"}})]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("状态名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("NEW")]),t._v(" "),a("td",[a("strong",[t._v("初始状态")]),t._v("，线程刚被构建，但是还没有调用start()方法")])]),t._v(" "),a("tr",[a("td",[t._v("RUNNABLE")]),t._v(" "),a("td",[a("strong",[t._v("运行状态")]),t._v("，Java系统系统中将操作系统中的"),a("code",[t._v("可运行状态")]),t._v("和"),a("code",[t._v("运行状态")]),t._v("统称为RUNNABLE")])]),t._v(" "),a("tr",[a("td",[t._v("BLOCKED")]),t._v(" "),a("td",[a("strong",[t._v("阻塞状态")]),t._v("，表示线程阻塞于锁")])]),t._v(" "),a("tr",[a("td",[t._v("WAITTING")]),t._v(" "),a("td",[a("strong",[t._v("等待状态")]),t._v("，表示线程进入等待状态，进入该状态表示当前线程做出一些特定动作（通知或者中断）")])]),t._v(" "),a("tr",[a("td",[t._v("TIME_WAITTING")]),t._v(" "),a("td",[a("strong",[t._v("超时等待状态")]),t._v("，该状态不同于等待状态，它可以在指定的时间后自行返回")])]),t._v(" "),a("tr",[a("td",[t._v("TERMINATED")]),t._v(" "),a("td",[a("strong",[t._v("中止状态")]),t._v("，表示当前线程已经执行完毕")])])])]),t._v(" "),a("p",[t._v("Blocked也分三种：")]),t._v(" "),a("p",[t._v("(一). 等待阻塞：运行(running)的线程执行o.wait()方法，JVM会把该线程放入等待队列(waitting queue)中，通过调用motify()方法回到就绪状态。")]),t._v(" "),a("p",[t._v("(二). 同步阻塞：运行(running)的线程在获取对象的同步锁时，若该同步锁被别的线程占用，则JVM会把该线程放入锁池(lock pool)中。")]),t._v(" "),a("p",[t._v("(三). 其他阻塞：运行(running)的线程执行Thread.sleep(long ms)或t.join()方法，或者发出了I/O请求时，JVM会把该线程置为阻塞状态。当sleep()状态超时、join()等待线程终止或者超时、或者I/O处理完毕时，线程重新自动转入可运行(runnable)状态。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20200615233613878-1594691307357.png",alt:"线程的转换已经线程的生命周期，图片来自于参考文章"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/image-20200616002629744-1594691307411.png",alt:"图片来源见参考文章"}})]),t._v(" "),a("p",[t._v("以下一小段来自于："),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/qY6D6-B0HQxfwlKG0Kzihg",target:"_blank",rel:"noopener noreferrer"}},[t._v("这么说线程生命周期是不是简单了点？"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("其中Java中：")]),t._v(" "),a("ul",[a("li",[t._v("将通用线程状态的"),a("code",[t._v("可运行状态")]),t._v("和"),a("code",[t._v("运行状态")]),t._v("合并为 "),a("code",[t._v("Runnable")]),t._v("，")]),t._v(" "),a("li",[t._v("将"),a("code",[t._v("休眠状态")]),t._v("细分为三种 ("),a("code",[t._v("BLOCKED")]),t._v("/"),a("code",[t._v("WAITING")]),t._v("/"),a("code",[t._v("TIMED_WAITING")]),t._v("); 反过来理解这句话，就是这三种状态在操作系统的眼中都是休眠状态，同样"),a("strong",[t._v("不会获得CPU使用权")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-1253198264.cos.ap-guangzhou.myqcloud.com/640-1594691307404.jpg",alt:"图片来源参考文章"}})]),t._v(" "),a("h3",{attrs:{id:"new"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new"}},[t._v("#")]),t._v(" NEW")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" myThread "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("NEW 表示线程创建了，但是还没有开始执行。")]),t._v(" "),a("h3",{attrs:{id:"runnable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runnable"}},[t._v("#")]),t._v(" RUNNABLE")]),t._v(" "),a("p",[t._v("Runnable表示线程正在可执行状态。包括"),a("strong",[t._v("运行状态")]),t._v("和"),a("strong",[t._v("可运行状态")]),t._v("两种。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" myThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("当执行"),a("code",[t._v(".start()")]),t._v("表示在可运行状态，拿到了CPU资源表示运行状态，所以为什么"),a("code",[t._v("Runnable")]),t._v("会包括运行状态和可运行状态。")]),t._v(" "),a("h3",{attrs:{id:"blocked"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blocked"}},[t._v("#")]),t._v(" BLOCKED")]),t._v(" "),a("p",[t._v("BLOCKED表示线程正在等待资源锁，而目前该资源正在被其他线程占有。")]),t._v(" "),a("p",[t._v("等待用户输入、synchronized锁等待都会造成阻塞。")]),t._v(" "),a("h3",{attrs:{id:"waiting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#waiting"}},[t._v("#")]),t._v(" WAITING")]),t._v(" "),a("p",[t._v("WAITING 状态表示线程正在等待其他的线程执行特定的操作。有三种方法可以导致线程处于WAITTING状态：")]),t._v(" "),a("ol",[a("li",[t._v("object.wait()")]),t._v(" "),a("li",[t._v("thread.join()")]),t._v(" "),a("li",[t._v("LockSupport.park()")])]),t._v(" "),a("h3",{attrs:{id:"timed-waiting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timed-waiting"}},[t._v("#")]),t._v(" TIMED_WAITING")]),t._v(" "),a("p",[t._v("TIMED_WAITING状态表示在一个有限的时间内等待其他线程执行特定的某些操作。")]),t._v(" "),a("p",[t._v("java中有5种方式来达到这种状态：")]),t._v(" "),a("ol",[a("li",[t._v("thread.sleep(long millis)")]),t._v(" "),a("li",[t._v("wait(int timeout) 或者 wait(int timeout, int nanos)")]),t._v(" "),a("li",[t._v("thread.join(long millis)")]),t._v(" "),a("li",[t._v("LockSupport.parkNanos")]),t._v(" "),a("li",[t._v("LockSupport.parkUntil")])]),t._v(" "),a("p",[t._v("TIMED_WAITING和WAITTING有什么区别呢？")]),t._v(" "),a("p",[a("code",[t._v("TIMED_WAITING")]),t._v("如果在给定的时间内没有等到其他线程的特定操作，则会被唤醒，从而进入争夺资源锁的队列，如果能够获取到锁，则会变成"),a("code",[t._v("Runnable")]),t._v("状态，如果获取不到锁，则会变成"),a("code",[t._v("BLOCKED")]),t._v("状态。")]),t._v(" "),a("h3",{attrs:{id:"terminated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terminated"}},[t._v("#")]),t._v(" TERMINATED")]),t._v(" "),a("p",[t._v("表示线程已经执行完毕，"),a("code",[t._v("run()")]),t._v("方法执行结束则线程处于"),a("code",[t._v("TERMINATED")]),t._v("状态。")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/qY6D6-B0HQxfwlKG0Kzihg",target:"_blank",rel:"noopener noreferrer"}},[t._v("这么说线程生命周期是不是简单了点？"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/wxd0108/p/5479442.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/wxd0108/p/5479442.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/developer_chan/p/10391365.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/developer_chan/p/10391365.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/flydean/p/12680277.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/flydean/p/12680277.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);