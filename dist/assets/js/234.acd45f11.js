(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{634:function(a,s,t){"use strict";t.r(s);var e=t(7),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("Java的垃圾回收老生常谈了，了解Java的GC对我们优化代码，设置参数性能调优有很大的帮助。")]),a._v(" "),s("p",[a._v("特别是面试也经常会问到。")]),a._v(" "),s("p",[a._v("本篇文章一次性帮你总结Java的垃圾回收知识点，主要围绕以下问题展开：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/GC.png",alt:"小朋友你是否有很多问号"}})]),a._v(" "),s("h2",{attrs:{id:"_1、为什么要有gc-哪些内存对象需要回收"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、为什么要有gc-哪些内存对象需要回收"}},[a._v("#")]),a._v(" 1、为什么要有GC，哪些内存对象需要回收？")]),a._v(" "),s("p",[a._v("对于一个Java开发者来说，了解过Java内存区域的都知道，Java内存区域分了堆、栈、程序计数器等等。")]),a._v(" "),s("p",[a._v("Java的程序计数器，栈内存 ，他们随线程生，随线程灭，方法结束后内存也就回收了。")]),a._v(" "),s("blockquote",[s("p",[a._v("一个字符串“abc”已经进入常量池，但是当前系统没有任何一个String对象引用了做“abc”的字面量，那么，如果发生垃圾回收并且有必要时，“abc”就会被系统移出常量池。")]),a._v(" "),s("p",[a._v("常量池中的其他类（接口）、方法、字段的符号引用也与此类似。")])]),a._v(" "),s("p",[a._v("当Java虚拟机发现内存资源紧张的时候，就会自动地去清理无用变量所占用的内存空间，为我们的程序提升更高的性能。")]),a._v(" "),s("h2",{attrs:{id:"_2、如何判断对象需要回收"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、如何判断对象需要回收"}},[a._v("#")]),a._v(" 2、如何判断对象需要回收？")]),a._v(" "),s("p",[a._v("一般常见的两种回收判断算法：")]),a._v(" "),s("h3",{attrs:{id:"_2-1、-引用计数算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、-引用计数算法"}},[a._v("#")]),a._v(" 2.1、 引用计数算法")]),a._v(" "),s("p",[a._v("给对象中添加一个引用计数器，每当有一个地方引用它时，计数器值就加1；当引用失效时，计数器值就减1。")]),a._v(" "),s("p",[a._v("任何时刻计数器为0的对象就是不可能再被使用的。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201112173947055.png",alt:" "}})]),a._v(" "),s("p",[a._v("该方法实现简单，效率高，但是它很难它很难解决对象之间相互循环引用的问题。比如图中的 "),s("code",[a._v("Object3")]),a._v(" 和"),s("code",[a._v("Object4")]),a._v("相互引用，引用计数不可能为0，虽然它们已经没有被Root引用了。")]),a._v(" "),s("p",[a._v("所以，大多数jvm判断对象是否存活基本并没有采取该方法。")]),a._v(" "),s("h3",{attrs:{id:"_2-2、可达性分析算法-根搜索算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、可达性分析算法-根搜索算法"}},[a._v("#")]),a._v(" 2.2、可达性分析算法（根搜索算法）")]),a._v(" "),s("p",[a._v("这个算法的基本思路就是通过一系列的称为“GC Roots”的对象作为起始点，从这些节点开始向下搜索,搜索所走过的路径称为引用链(Reference Chain)。")]),a._v(" "),s("p",[a._v("当一个对象到GC Roots没有任何引用链相连时（不可达）则证明此对象是不可用的。")]),a._v(" "),s("blockquote",[s("p",[a._v("要注意的是，不可达对象不等价于可回收对象，不可达对象变为可回收对象至少要经过两次标记过程。两次标记后仍然是可回收对象，则将面临回收。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201112173028555.png",alt:" "}})]),a._v(" "),s("p",[s("strong",[a._v("被认为GC Roots的有以下几种：")])]),a._v(" "),s("ul",[s("li",[a._v("虚拟机栈中引用的对象")]),a._v(" "),s("li",[a._v("方法区中静态属性、常量引用的对象")]),a._v(" "),s("li",[a._v("Native方法引用的对象")])]),a._v(" "),s("h2",{attrs:{id:"_3、如何回收-垃圾收集算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、如何回收-垃圾收集算法"}},[a._v("#")]),a._v(" 3、如何回收（垃圾收集算法）？")]),a._v(" "),s("p",[a._v("随着Java虚拟机的发展，jvm衍生出了很多种垃圾回收算法。")]),a._v(" "),s("h4",{attrs:{id:"_1、标记-清除-mark-sweep-算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、标记-清除-mark-sweep-算法"}},[a._v("#")]),a._v(" 1、标记-清除（Mark-Sweep）算法")]),a._v(" "),s("p",[a._v("最基础的垃圾回收算法，分为两个阶段，标记和清除。")]),a._v(" "),s("p",[a._v("标记阶段标记出所有需要回收的对象，清除阶段回收被标记的对象所占用的空间。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/249993-20170307205221484-1705867339.png",alt:" "}})]),a._v(" "),s("p",[a._v("从图中我们就可以发现，该算法最大的问题是内存碎片化严重，后续可能发生大对象不能找到可利用空间的问题。")]),a._v(" "),s("h4",{attrs:{id:"_2、复制算法-copying"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、复制算法-copying"}},[a._v("#")]),a._v(" 2、复制算法（copying ）")]),a._v(" "),s("p",[a._v("为了解决 Mark-Sweep 算法内存碎片化的缺陷而被提出的算法。按内存容量将内存划分为"),s("strong",[a._v("相等大小")]),a._v("的两块。")]),a._v(" "),s("p",[a._v("每次只使用其中一块，当这一块内存满后将尚存活的对象复制到另一块上去，把已使用的内存清掉，如图：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/249993-20170307205837031-1503624197.png",alt:" "}})]),a._v(" "),s("p",[a._v("这种算法虽然实现简单，内存效率高，不易产生碎片，但是最大的问题是可用内存被压缩到了原本的一半。且存活对象增多的话，Copying 算法的效率会大大降低。")]),a._v(" "),s("h4",{attrs:{id:"_3、标记-整理-mark-compact-算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、标记-整理-mark-compact-算法"}},[a._v("#")]),a._v(" 3、标记-整理（Mark-Compact）算法")]),a._v(" "),s("p",[a._v("结合了以上两个算法，为了避免缺陷而提出。标记阶段和   "),s("code",[a._v("标记-清除（Mark-Sweep）算法")]),a._v(" 相同，标记后不是清理对象，而是将存活对象移向内存的一端。"),s("strong",[a._v("然后清除两端边界外的对象。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/249993-20170308200502734-920263398.png",alt:" "}})]),a._v(" "),s("p",[a._v("直接清除边界的对象也不好，如果边界是老年代，每一次都被清除就很不合理。")]),a._v(" "),s("h4",{attrs:{id:"_4、分代收集算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、分代收集算法"}},[a._v("#")]),a._v(" 4、分代收集算法")]),a._v(" "),s("p",[a._v("分代收集法是目前虚拟机（包括"),s("strong",[a._v("HotSpot VM")]),a._v("）收集器都是采用该方法。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201030143215163.png",alt:" "}})]),a._v(" "),s("p",[a._v("对象将根据存活的时间被分为：新生代（Young Generation）、年老代（Old Generation）、永久代（Permanent Generation，也就是方法区），然后进行分代回收，分算法回收。")]),a._v(" "),s("p",[s("strong",[a._v("新生代")]),a._v("：对象被创建时，内存的分配首先发生在新生代（准确地说是Eden区，大对象（大于Eden空间）可以直接 被创建在年老代）")]),a._v(" "),s("p",[a._v("新生代又划分为 "),s("code",[a._v("Eden 区")]),a._v(" + "),s("code",[a._v("Survivor区")]),a._v(" （Survivor区又分 from 和 to 区），大小分别占 "),s("code",[a._v("80%，10%，10%")]),a._v("。")]),a._v(" "),s("p",[a._v("Eden区是连续的内存空间，因此在其上分配内存极快。")]),a._v(" "),s("p",[s("strong",[a._v("老年代")]),a._v("：老年代存储的对象比新生代多，而且大对象也多。老年代用的算法是"),s("strong",[a._v("标记-整理算法")]),a._v("。")]),a._v(" "),s("p",[s("strong",[a._v("永久代（方法区）")]),a._v("：1.8就没有了，只有元空间。常见的就是"),s("strong",[a._v("常量池、类信息")]),a._v("等等。")]),a._v(" "),s("h4",{attrs:{id:"分代收集算法的gc过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分代收集算法的gc过程"}},[a._v("#")]),a._v(" 分代收集算法的GC过程：")]),a._v(" "),s("p",[a._v("（1）在年轻代中，Eden区提供堆内存如果满了，Eden进行"),s("strong",[a._v("MinorGC")]),a._v("，将存活的对象→from ，Eden区清空；")]),a._v(" "),s("p",[a._v("（2）Eden区再次满， Eden 区和 from  区同时进行 Minor GC，把存活对象放入 to 区，Eden和from 同时清空；")]),a._v(" "),s("p",[a._v("如果在to区中的对象仍然存活，则把对象标志 +1。")]),a._v(" "),s("p",[a._v("（3）重复（2）的操作， 某些对象在反复 Survive "),s("strong",[a._v("15")]),a._v(" 次后，或者Eden+from 的存活对象 > to ，这些对象就只能放到老年代了，如果老年代放不下了，就进行"),s("strong",[a._v("Full GC")]),a._v("）；")]),a._v(" "),s("blockquote",[s("p",[a._v("记住是 15 次")])]),a._v(" "),s("p",[a._v("（4）当 Old 区也被填满时，进行 "),s("strong",[a._v("Full GC")]),a._v("，对 Old 区进行垃圾回收。")]),a._v(" "),s("blockquote",[s("p",[a._v("可以通过参数 SurvivorRatio 手动配置 Eden 区和单个 Survivor 区的比例，默认为 8。可以通过参数–XX:SurvivorRatio 来设定，即将堆内存中年轻代划分为8:1:1")])]),a._v(" "),s("h2",{attrs:{id:"_4、垃圾回收器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、垃圾回收器"}},[a._v("#")]),a._v(" 4、垃圾回收器")]),a._v(" "),s("p",[a._v("垃圾回收器是虚拟机不断发展产生的，不同的垃圾回收器使用不同的垃圾回收算法（下面讲到）")]),a._v(" "),s("p",[a._v("以HotSpot VM来说，垃圾回收器大致分为七种类型：")]),a._v(" "),s("ul",[s("li",[a._v("串行：Serial New收集器")]),a._v(" "),s("li",[a._v("串行：Serial Old收集器")]),a._v(" "),s("li",[a._v("串行：ParNew收集器")]),a._v(" "),s("li",[a._v("并行：Parallel收集器")]),a._v(" "),s("li",[a._v("并行：Parallel Old 收集器")]),a._v(" "),s("li",[a._v("并发 标记扫描CMS收集器")]),a._v(" "),s("li",[a._v("G1收集器")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201105180041789.png",alt:" "}})]),a._v(" "),s("blockquote",[s("p",[a._v("parallel 的意思是并行的意思。concurrent 是并发的意思。")]),a._v(" "),s("p",[a._v("注：串行、并行 其它工作线程要暂停，并发不会。")])]),a._v(" "),s("p",[a._v("jdk11中，发布最新的ZGC垃圾收集器。完全没有分代的概念，官方介绍是无空间碎片，时间可控，能超大堆收集。")]),a._v(" "),s("h2",{attrs:{id:"_5、java-四中引用类型-与-gc回收关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、java-四中引用类型-与-gc回收关系"}},[a._v("#")]),a._v(" 5、JAVA  四中引用类型 与 GC回收关系")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/image-20201030151715015.png",alt:" "}})]),a._v(" "),s("h2",{attrs:{id:"_6、jvm常见参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、jvm常见参数"}},[a._v("#")]),a._v(" 6、JVM常见参数")]),a._v(" "),s("p",[a._v("设置合理的jvm参数对Java程序有至关重要的作用。")]),a._v(" "),s("blockquote",[s("p",[s("strong",[a._v("基本设置：")])]),a._v(" "),s("p",[a._v("-Xms300m 起始内存（堆大小）设置为300m")]),a._v(" "),s("p",[a._v("-Xmx 最大内存")]),a._v(" "),s("p",[a._v("-Xmn 新生代内存")]),a._v(" "),s("p",[a._v("-Xss 栈大小。 就是创建线程后，分配给每一个线程的内存大小")]),a._v(" "),s("p",[a._v("-XX:NewRatio=n:设置年轻代和年老代的比值。如:为3，表示年轻代与年老代比值为1：3，年轻代占整个年轻代年老代和的1/4")]),a._v(" "),s("p",[a._v("-XX:SurvivorRatio=n:年轻代中Eden区与两个Survivor区的比值。注意Survivor区有两个。如：3，表示Eden：Survivor=3：2，一个Survivor区占整个年轻代的1/5")]),a._v(" "),s("p",[a._v("-XX:MaxPermSize=n:设置持久代大小")]),a._v(" "),s("p",[s("strong",[a._v("收集器设置")])]),a._v(" "),s("p",[a._v("-XX:+UseSerialGC:设置串行收集器")]),a._v(" "),s("p",[a._v("-XX:+UseParallelGC:设置并行收集器")]),a._v(" "),s("p",[a._v("-XX:+UseParalledlOldGC:设置并行年老代收集器")]),a._v(" "),s("p",[a._v("-XX:+UseConcMarkSweepGC:设置并发收集器（CMS）")]),a._v(" "),s("p",[s("strong",[a._v("并行收集器设置")])]),a._v(" "),s("p",[a._v("-XX:ParallelGCThreads=n:设置并行收集器收集时使用的CPU数。并行收集线程数。")]),a._v(" "),s("p",[a._v("-XX:MaxGCPauseMillis=n:设置并行收集最大暂停时间")]),a._v(" "),s("p",[a._v("-XX:GCTimeRatio=n:设置垃圾回收时间占程序运行时间的百分比。公式为1/(1+n)")]),a._v(" "),s("p",[s("strong",[a._v("并发收集器设置")])]),a._v(" "),s("p",[a._v("-XX:+CMSIncrementalMode:设置为增量模式。适用于单CPU情况。")]),a._v(" "),s("p",[a._v("-XX:ParallelGCThreads=n:设置并发收集器年轻代收集方式为并行收集时，使用的CPU数。并行收集线程数。")]),a._v(" "),s("p",[s("strong",[a._v("垃圾回收统计信息")])]),a._v(" "),s("p",[a._v("-XX:+PrintGC")]),a._v(" "),s("p",[a._v("-XX:+PrintGCDetails")]),a._v(" "),s("p",[a._v("-XX:+PrintGCTimeStamps")]),a._v(" "),s("p",[a._v("-Xloggc:filename")])]),a._v(" "),s("h2",{attrs:{id:"_7、查看垃圾回收器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、查看垃圾回收器"}},[a._v("#")]),a._v(" 7、查看垃圾回收器")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("java "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PrintCommandLineFlags")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("version\n")])])]),s("p",[a._v("Windows：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HaC")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" java "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PrintCommandLineFlags")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("version\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InitialHeapSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("266928960")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4270863360")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PrintCommandLineFlags")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseCompress")]),a._v("\nedClassPointers "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseCompressedOops")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseLargePagesIndividualAllocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseParallelGC")]),a._v("\njava version "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.8.0_131"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" SE "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runtime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Environment")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0_131")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HotSpot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Bit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Server")]),a._v(" VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.131")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" mixed mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("Linux：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@GZSB")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("CJB"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("SHH1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("GEMINI"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("# java "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PrintCommandLineFlags")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("version\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InitialHeapSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("261339776")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4181436416")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PrintCommandLineFlags")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseCompressedClassPointers")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseCompressedOops")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseParallelGC")]),a._v(" \njava version "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.8.0_131"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" SE "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Runtime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Environment")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0_131")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HotSpot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Bit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Server")]),a._v(" VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.131")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" mixed mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("可以看到是使用了 "),s("code",[a._v("UseParallelGC")])]),a._v(" "),s("p",[a._v("还可以使用 "),s("code",[a._v("jmap -heap 进程id")]),a._v(" 命令查看收集器，还可以查看新生代、老年代的空间大小。")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@VM_0_12_centos")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("# jmap "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("heap "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19505")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Attaching")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("process")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ID")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19505")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" please wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Debugger")]),a._v(" attached "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("successfully"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("\nServer")]),a._v(" compiler detected"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\nJVM version is "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.171")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b11\n\nusing thread"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("local object "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("allocation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("\nGarbage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("First")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("G1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" GC "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Heap")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Configuration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinHeapFreeRatio")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("40")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapFreeRatio")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("70")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapSize")]),a._v("              "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("268435456")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("256.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NewSize")]),a._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1363144")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.2999954223632812")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxNewSize")]),a._v("               "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("160432128")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("153.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OldSize")]),a._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5452592")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.1999969482421875")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NewRatio")]),a._v("                 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurvivorRatio")]),a._v("            "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MetaspaceSize")]),a._v("            "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("21807104")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.796875")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CompressedClassSpaceSize")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1073741824")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxMetaspaceSize")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17592186044415")]),a._v(" MB\n   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("G1HeapRegionSize")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1048576")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Heap")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Usage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\nG1 "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Heap")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n   regions  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("256")]),a._v("\n   capacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("268435456")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("256.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   used     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("66499440")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("63.41880798339844")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   free     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("201936016")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.58119201660156")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24.772971868515015")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\nG1 "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Young")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Generation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Eden")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Space")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n   regions  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18")]),a._v("\n   capacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("74448896")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("71.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   used     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18874368")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   free     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("55574528")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.35211267605634")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Survivor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Space")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n   regions  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n   capacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1048576")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   used     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1048576")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   free     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\nG1 "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Old")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Generation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n   regions  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("46")]),a._v("\n   capacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("58720256")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("56.0")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   used     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("46576496")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("44.41880798339844")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   free     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12143760")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11.581192016601562")]),a._v("MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("79.31929997035435")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("34372")]),a._v(" interned "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Strings")]),a._v(" occupying "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3886072")]),a._v(" bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),s("p",[s("code",[a._v("Garbage-First (G1) GC with 1 thread(s)")]),a._v(" ，可以看到是使用了 G1 垃圾收集器。"),s("code",[a._v("Eden Space")]),a._v("、"),s("code",[a._v("Survivor Space")]),a._v("、"),s("code",[a._v("G1 Old Generation")]),a._v("分别说明了Eden区、Survivor区、老年代的大小。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 常见的垃圾回收器标识：\n Concurrent Mark-Sweep GC ：CMS回收器\n Mark Sweep Compact GC：    串行GC（Serial GC）\n Parallel GC with 2 thread(s)： 并行GC（ParNew）\n")])])]),s("blockquote",[s("p",[a._v("常用的命令行工具还有：jps、jstat、jinfo、jmap、jstack。而更多的可视化工具如jconsole、visualVM等暂不介绍，大家有兴趣请参阅相关文档。查看新生代内存占用、老年代内存占用、其他区内存占用和GC等四大方面的指标。")])]),a._v(" "),s("h2",{attrs:{id:"_8、小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、小结"}},[a._v("#")]),a._v(" 8、小结")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("判断是否需要回收内存的算法： 引用计数法、可达性分析算法（根搜索算法）")])]),a._v(" "),s("li",[s("p",[a._v("垃圾回收算法分为 标记-清除、复制、标志-整理、分代收集算法 4种。")])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("垃圾回收器")]),a._v(" 目前分为7种类型,按类型可分"),s("strong",[a._v("串行，并行，并发标记，G1")]),a._v("。小数据量和小型应用，使用串行垃圾回收器即可；对于对响应时间无特殊要求的，可以使用并行垃圾回收器和并发标记垃圾回收器。对于heap可以分配很大的中大型应用，使用G1垃圾回收器比较好，进一步优化和减少了GC暂停时间，避免用户在使用有顿挫的感觉。")])]),a._v(" "),s("li",[s("p",[a._v("没有最好的垃圾回收器，，每一种垃圾回收器有自己的回收算法甚至是几种算法一起用，对新生代和老年代又可以分开回收。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/DogerRain/image@main/img/GC2.png",alt:"JVM GC总结"}})]),a._v(" "),s("hr")])])])}),[],!1,null,null,null);s.default=r.exports}}]);